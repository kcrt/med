{
  "_meta": {
    "version": "1.0.0",
    "lastModified": "2025-01-25",
    "description": "Medical calculation formulas"
  },
  "Body Structure Index": {
    "bmi_adult": {
      "name": "BMI (Adult)",
      "input": {
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 30,
          "max": 300
        },
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 3,
          "max": 300
        }
      },
      "output": {
        "BMI": {
          "label": "BMI",
          "formula": "weight/(height/100)/(height/100)",
          "unit": "kg/m²",
          "precision": 1
        },
        "who": {
          "label": "WHO (World Health Organization)",
          "text": "≥25: overweight, ≥30: obese"
        },
        "who_diag": {
          "label": "WHO (World Health Organization)",
          "formula": "iif(BMI>=30, 'obese', BMI>=25, 'overweight', 'normal')"
        },
        "jasso": {
          "label": "Japan Society for the Study of Obesity",
          "text": "Japan-specific BMI categories",
          "locales_in": ["ja"]
        },
        "jasso_diag": {
          "label": "JASSO Diagnosis",
          "formula": "iif(BMI<18.5, 'Underweight', BMI<25, 'Normal', 'Obese')",
          "locales_in": ["ja"]
        }
      },
      "test": [
        {
          "input": {
            "height": 170,
            "weight": 70
          },
          "output": {
            "BMI": 24.2,
            "who_diag": "normal",
            "jasso_diag": "Normal"
          }
        }
      ],
      "ref": {
        "Wikipedia": "http://ja.wikipedia.org/wiki/%E3%83%9C%E3%83%87%E3%82%A3%E3%83%9E%E3%82%B9%E6%8C%87%E6%95%B0"
      }
    },
    "bmi_child": {
      "name": "BMI (Child)",
      "input": {
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 10,
          "max": 300
        },
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 0,
          "max": 300
        }
      },
      "output": {
        "kaup": {
          "label": "Kaup Index",
          "formula": "weight/(height/100)/(height/100)",
          "unit": "kg/m²",
          "precision": 1
        },
        "info1": {
          "label": "Infants (3 months+)",
          "text": "Normal range: 15-18"
        },
        "kaup_diag": {
          "label": "Infants (3 months+)",
          "formula": "if(kaup>=15 and kaup<=18, 'Normal range', 'Outside normal range')"
        },
        "rohrer": {
          "label": "Rohrer Index",
          "formula": "weight/((height/100)*(height/100)*(height/100))*10",
          "unit": "",
          "precision": 1
        },
        "info2": {
          "label": "School-age children",
          "text": "Standard: 130, ≥160 indicates obesity"
        },
        "rohrer_diag": {
          "label": "School-age children",
          "formula": "iif(rohrer<130, 'Underweight', rohrer<160, 'Standard', 'Obese')"
        }
      },
      "test": [
        {
          "input": {
            "height": 80,
            "weight": 10
          },
          "output": {
            "kaup": 15.6,
            "kaup_diag": "Normal range",
            "rohrer": 195.3,
            "rohrer_diag": "Obese"
          }
        }
      ],
      "ref": {
        "Wikipedia": "http://ja.wikipedia.org/wiki/%E4%BD%93%E6%A0%BC%E6%8C%87%E6%95%B0"
      }
    },
    "target_height": {
      "name": "Target Height",
      "input": {
        "father_height": {
          "label": "Father's Height [cm]",
          "type": "float",
          "min": 0,
          "max": 300
        },
        "mother_height": {
          "label": "Mother's Height [cm]",
          "type": "float",
          "min": 0,
          "max": 300
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "target_height": {
          "label": "Target Height [cm]",
          "formula": "sex ? (father_height+mother_height+13)/2 : (father_height-13+mother_height)/2",
          "precision": 1
        },
        "target_range_min": {
          "label": "Target Range Min [cm]",
          "formula": "sex ? target_height - 9 : target_height - 8",
          "precision": 1
        },
        "target_range_max": {
          "label": "Target Range Max [cm]",
          "formula": "sex ? target_height + 9 : target_height + 8",
          "precision": 1
        }
      },
      "test": [
        {
          "input": {
            "father_height": 175,
            "mother_height": 160,
            "sex": 1
          },
          "output": {
            "target_height": 174
          }
        }
      ],
      "ref": {
        "Clinical pediatric endocrinology 16(4), 85-87, 2007-10": "https://www.jstage.jst.go.jp/article/cpe/16/4/16_4_85/_pdf"
      }
    },
    "bsa": {
      "name": "Body Surface Area",
      "input": {
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 10,
          "max": 300
        },
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 0,
          "max": 300
        }
      },
      "output": {
        "bsa_dubois": {
          "label": "BSA (m²) Du Bois",
          "formula": "BSA_DuBois(height, weight)",
          "unit": "m²",
          "precision": 4
        },
        "bsa_takahira": {
          "label": "BSA (m²) Takahira",
          "formula": "0.007246 * weight ^ 0.425 * height ^ 0.725",
          "unit": "m²",
          "precision": 4
        },
        "bsa_mosteller": {
          "label": "BSA (m²) Mosteller",
          "formula": "sqrt(height * weight / 3600)",
          "unit": "m²",
          "precision": 4
        },
        "bsa_fujimoto_0": {
          "label": "BSA (m²) Fujimoto (0 years)",
          "formula": "95.68 * weight ^ 0.473 * height ^ 0.655 / 10000",
          "unit": "m²",
          "precision": 4
        },
        "bsa_fujimoto_1_5": {
          "label": "BSA (m²) Fujimoto (1-5 years)",
          "formula": "381.89 * weight ^ 0.423 * height ^ 0.362 / 10000",
          "unit": "m²",
          "precision": 4
        },
        "bsa_fujimoto_6": {
          "label": "BSA (m²) Fujimoto (6+ years)",
          "formula": "88.83 * weight ^ 0.444 * height ^ 0.663 / 10000",
          "unit": "m²",
          "precision": 4
        }
      },
      "test": [
        {
          "input": {
            "height": 170,
            "weight": 70
          },
          "output": {
            "bsa_mosteller": 1.8181
          }
        }
      ],
      "ref": {
        "Du Bois D, Du Bois EF: Nutrision 5: 303-311, 1989": "pubmed:2520314",
        "Mosteller RD: N Engl J Med 317: 1098, 1987": "pubmed:3657876",
        "藤本ら (1968), 日本衛生学雑誌 23(5):7-14": ""
      }
    },
    "postconceptional_days": {
      "name": "Postconceptional Days",
      "input": {
        "edc": {
          "label": "Expected Date of Confinement",
          "type": "date"
        },
        "target_date": {
          "label": "Target Date",
          "type": "date",
          "default": "today"
        }
      },
      "output": {
        "_edc_d": {
          "label": "hidden",
          "formula": "(target_date-edc) / (24*60*60)"
        },
        "_pca_d": {
          "label": "hidden",
          "formula": "_edc_d + (40*7)"
        },
        "_edcmonth": {
          "label": "hidden",
          "formula": "Math.floor(_edc_d/365*12)"
        },
        "postconceptional_days": {
          "label": "Postconceptional Days",
          "formula": "_pca_d",
          "unit": "days",
          "precision": 0
        },
        "postconceptional_age": {
          "label": "Postconceptional Age",
          "formula": "(_pca_d/7 < 1 || _pca_d/7 > 44) ? '-' : (Math.floor(_pca_d/7) + ' weeks ' + (_pca_d % 7) + ' days')"
        },
        "corrected_age": {
          "label": "Corrected Age",
          "formula": "(_edc_d < 0) ? '-' : (_edcmonth + ' months ' + Math.floor(_edc_d-Math.floor(_edcmonth*365/12)) + ' days')"
        }
      },
      "test": [
        {
          "input": {
            "edc": 1705276800,
            "target_date": 1705276800
          },
          "output": {
            "postconceptional_days": 280
          }
        }
      ],
      "ref": {
        "Standard obstetric calculation": ""
      }
    }
  },
  "Cardiology": {
    "chads2": {
      "name": "CHADS₂ Score",
      "input": {
        "heart_failure": {
          "label": "Heart Failure",
          "type": "onoff"
        },
        "hypertension": {
          "label": "Hypertension",
          "type": "onoff"
        },
        "age_75": {
          "label": "Age ≥75",
          "type": "onoff"
        },
        "diabetes": {
          "label": "Diabetes Mellitus",
          "type": "onoff"
        },
        "stroke": {
          "label": "Stroke/TIA History",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Score",
          "formula": "heart_failure + hypertension + age_75 + diabetes + stroke*2"
        },
        "risk": {
          "label": "Stroke Risk",
          "formula": "iif(score==0, 'Low risk 1.0%/year', score==1, 'Low-mod risk 1.5%/year', score==2, 'Mod risk 2.5%/year', score==3, 'High risk 5.0%/year', 'Very high risk >7.0%/year')"
        },
        "recommendation": {
          "label": "Recommendation",
          "text": "Consider warfarin for score ≥2"
        }
      },
      "test": [
        {
          "input": {
            "heart_failure": 0,
            "hypertension": 1,
            "age_75": 1,
            "diabetes": 0,
            "stroke": 0
          },
          "output": {
            "score": 2
          }
        }
      ],
      "ref": {
        "Brian F. et al: JAMA. 2001;285(22):2864-2870": "http://jama.jamanetwork.com/article.aspx?volume=285&issue=22&page=2864"
      }
    },
    "cha2ds2_vasc": {
      "name": "CHA₂DS₂-VASc Score",
      "input": {
        "heart_failure": {
          "label": "Congestive Heart Failure",
          "type": "onoff"
        },
        "hypertension": {
          "label": "Hypertension",
          "type": "onoff"
        },
        "age_75": {
          "label": "Age ≥75",
          "type": "onoff"
        },
        "diabetes": {
          "label": "Diabetes Mellitus",
          "type": "onoff"
        },
        "stroke": {
          "label": "Stroke/TIA/Thromboembolism",
          "type": "onoff"
        },
        "vascular_disease": {
          "label": "Vascular Disease (MI, PAD, aortic plaque)",
          "type": "onoff"
        },
        "age_65_74": {
          "label": "Age 65-74",
          "type": "onoff"
        },
        "sex": {
          "label": "Female Sex",
          "type": "sex"
        }
      },
      "output": {
        "score": {
          "label": "Score",
          "formula": "heart_failure + hypertension + age_75*2 + diabetes + stroke*2 + vascular_disease + age_65_74 + (sex==0?1:0)"
        },
        "risk": {
          "label": "Stroke Risk (%/year)",
          "formula": "iif(score==0, '0 (Low risk)', score==1, '0.5-0.9 (Low risk)', score==2, '1.5-2.5 (Moderate risk)', score==3, '3-5 (High risk)', '>5 (Very high risk)')"
        },
        "recommendation": {
          "label": "OAC Recommendation",
          "text": "Score ≥2 (men) or ≥3 (women): Consider oral anticoagulant"
        }
      },
      "test": [
        {
          "input": {
            "heart_failure": 1,
            "hypertension": 1,
            "age_75": 0,
            "diabetes": 0,
            "stroke": 0,
            "vascular_disease": 0,
            "age_65_74": 0,
            "sex": 1
          },
          "output": {
            "score": 2
          }
        }
      ],
      "ref": {
        "Lip GYH et al: Chest. 2010;138(6):1493-1500": "pubmed:20199583",
        "2012 ESC Guidelines for Atrial Fibrillation": "https://escardio.org/guidelines"
      }
    },
    "cha2ds2_va": {
      "name": "CHA₂DS₂-VA Score",
      "input": {
        "heart_failure": {
          "label": "Congestive Heart Failure",
          "type": "onoff"
        },
        "hypertension": {
          "label": "Hypertension",
          "type": "onoff"
        },
        "age_75": {
          "label": "Age ≥75",
          "type": "onoff"
        },
        "diabetes": {
          "label": "Diabetes Mellitus",
          "type": "onoff"
        },
        "stroke": {
          "label": "Stroke/TIA/Thromboembolism",
          "type": "onoff"
        },
        "vascular_disease": {
          "label": "Vascular Disease (MI, PAD, aortic plaque)",
          "type": "onoff"
        },
        "age_65_74": {
          "label": "Age 65-74",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Score",
          "formula": "heart_failure + hypertension + age_75*2 + diabetes + stroke*2 + vascular_disease + age_65_74"
        },
        "risk": {
          "label": "Stroke Risk (%/year)",
          "formula": "iif(score==0, '0 (Minimal risk)', score==1, '0.2 (Low risk)', score==2, '1.0 (Moderate risk)', score==3, '2.5 (High risk)', '>5 (Very high risk)')"
        },
        "recommendation": {
          "label": "OAC Recommendation",
          "text": "Score ≥2: Consider oral anticoagulant"
        }
      },
      "test": [
        {
          "input": {
            "heart_failure": 1,
            "hypertension": 1,
            "age_75": 0,
            "diabetes": 0,
            "stroke": 0,
            "vascular_disease": 0,
            "age_65_74": 0
          },
          "output": {
            "score": 2
          }
        }
      ],
      "ref": {
        "TODO": "TODO"
      }
    },
    "ejection_fraction": {
      "name": "Left Ventricular Ejection Fraction",
      "input": {
        "lvdd": {
          "label": "LVDd [mm]",
          "type": "float",
          "min": 1,
          "max": 100
        },
        "lvds": {
          "label": "LVDs [mm]",
          "type": "float",
          "min": 2,
          "max": 100
        }
      },
      "output": {
        "pombo": {
          "label": "Pombo (Cubed) [%]",
          "formula": "(lvdd ^ 3 - lvds ^ 3)/lvdd ^ 3 * 100",
          "unit": "%",
          "precision": 1
        },
        "gibson": {
          "label": "Gibson [%]",
          "formula": "CalculateGibsonEF(lvdd, lvds)",
          "unit": "%",
          "precision": 1
        },
        "teichholz": {
          "label": "Teichholz [%]",
          "formula": "CalculateTeichholzEF(lvdd, lvds)",
          "unit": "%",
          "precision": 1
        }
      },
      "test": [
        {
          "input": {
            "lvdd": 50,
            "lvds": 30
          },
          "output": {
            "pombo": 78.4
          }
        }
      ],
      "ref": {
        "J F. Pombo, Circulation 1971": "doi: 10.1161/01.CIR.43.4.480",
        "Gibson, Teichholz references under investigation": ""
      }
    },
    "pediatric_lvdd": {
      "name": "Pediatric LVDd Standard Values",
      "input": {
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 10,
          "max": 300
        },
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 0,
          "max": 300
        }
      },
      "output": {
        "nagasawa_preterm": {
          "label": "LVDd (mm) Preterm; Nagasawa",
          "formula": "0.459*height-5.43",
          "precision": 1
        },
        "nagasawa_term": {
          "label": "LVDd (mm) Term & <1 year; Nagasawa",
          "formula": "0.352*height+1.86",
          "precision": 1
        },
        "kampmann": {
          "label": "LVDd (mm) Infant; Kampmann",
          "formula": "38.537 * BSA_DuBois(height, weight) ^ 0.4509",
          "precision": 1
        }
      },
      "test": [
        {
          "input": {
            "height": 80,
            "weight": 10
          },
          "output": {
            "kampmann": 27.1
          }
        }
      ],
      "ref": {
        "Nagasawa H.: Cardiol Young. 2010 Oct;20(5):526-31": "pubmed:20598214",
        "Kampmann C et al.:Heart (British Cardiac Society). 2000;83(6):667-72": "pubmed:10814626"
      }
    },
    "kawasaki_coronary": {
      "name": "Kawasaki Disease Coronary Artery",
      "input": {
        "bsa": {
          "label": "Body Surface Area [m²]",
          "type": "float",
          "min": 0,
          "max": 4
        },
        "lmca": {
          "label": "LMCA [cm]",
          "type": "float",
          "min": 0,
          "max": 8
        },
        "plad": {
          "label": "pLAD [cm]",
          "type": "float",
          "min": 0,
          "max": 8
        },
        "prca": {
          "label": "pRCA [cm]",
          "type": "float",
          "min": 0,
          "max": 8
        }
      },
      "output": {
        "lmca_z": {
          "label": "LMCA Z-score",
          "formula": "CalculateZScore(lmca, 0.31747 * bsa ^ 0.36008 - 0.02887, 0.03040 + 0.01514 * bsa)"
        },
        "plad_z": {
          "label": "pLAD Z-score",
          "formula": "CalculateZScore(plad, 0.26108 * bsa ^ 0.37893 - 0.02852, 0.01465 + 0.01996 * bsa)"
        },
        "prca_z": {
          "label": "pRCA Z-score",
          "formula": "CalculateZScore(prca, 0.26117 * bsa ^ 0.39992 - 0.02756, 0.02407 + 0.01597 * bsa)"
        }
      },
      "ref": {
        "McCrindle BW et al.": "pubmed:17576863"
      }
    },
    "has_bled": {
      "name": "HAS-BLED Score",
      "input": {
        "hypertension": {
          "label": "Hypertension (SBP >160 mmHg)",
          "type": "onoff"
        },
        "renal_disease": {
          "label": "Abnormal renal function",
          "type": "onoff"
        },
        "liver_disease": {
          "label": "Abnormal liver function",
          "type": "onoff"
        },
        "stroke": {
          "label": "Stroke history",
          "type": "onoff"
        },
        "bleeding": {
          "label": "Prior major bleeding or predisposition",
          "type": "onoff"
        },
        "labile_inr": {
          "label": "Labile INR (if on warfarin)",
          "type": "onoff"
        },
        "elderly": {
          "label": "Age >65 years",
          "type": "onoff"
        },
        "drugs": {
          "label": "Drugs (antiplatelets/NSAIDs)",
          "type": "onoff"
        },
        "alcohol": {
          "label": "Alcohol (≥8 drinks/week)",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "HAS-BLED Score",
          "formula": "hypertension + renal_disease + liver_disease + stroke + bleeding + labile_inr + elderly + drugs + alcohol"
        },
        "risk": {
          "label": "Bleeding Risk",
          "formula": "iif(score<=2, 'Low risk (0.9-3.7%/year)', score==3, 'Moderate risk (4-5.8%/year)', 'High risk (8-12.5%/year)')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "Score ≥3: High bleeding risk. Consider more careful follow-up and correction of modifiable risk factors"
        }
      },
      "test": [
        {
          "input": {
            "hypertension": 1,
            "renal_disease": 0,
            "liver_disease": 0,
            "stroke": 0,
            "bleeding": 0,
            "labile_inr": 0,
            "elderly": 1,
            "drugs": 1,
            "alcohol": 0
          },
          "output": {
            "score": 3,
            "risk": "Moderate risk (4-5.8%/year)"
          }
        }
      ],
      "ref": {
        "Pisters R, et al. Chest. 2010;138(5):1093-100.": "pubmed:20299623"
      }
    },
    "timi_stemi": {
      "name": "TIMI Risk Score (STEMI)",
      "input": {
        "age_75": {
          "label": "Age ≥75",
          "type": "onoff"
        },
        "age_65_74": {
          "label": "Age 65-74",
          "type": "onoff"
        },
        "diabetes_htn_angina": {
          "label": "Diabetes or Hypertension or Angina",
          "type": "onoff"
        },
        "sbp_lt_100": {
          "label": "Systolic BP <100 mmHg",
          "type": "onoff"
        },
        "hr_gt_100": {
          "label": "Heart rate >100 bpm",
          "type": "onoff"
        },
        "killip_2to4": {
          "label": "Killip class II-IV",
          "type": "onoff"
        },
        "weight_lt_67": {
          "label": "Weight <67 kg",
          "type": "onoff"
        },
        "anterior_stemi_lbbb": {
          "label": "Anterior STEMI or LBBB",
          "type": "onoff"
        },
        "time_gt_4h": {
          "label": "Time to treatment >4 hours",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "TIMI Risk Score",
          "formula": "age_75*3 + age_65_74*2 + diabetes_htn_angina + sbp_lt_100*3 + hr_gt_100*2 + killip_2to4*2 + weight_lt_67 + anterior_stemi_lbbb + time_gt_4h"
        },
        "mortality": {
          "label": "30-day Mortality",
          "formula": "iif(score==0, '0.8%', score==1, '1.6%', score==2, '2.2%', score==3, '4.4%', score==4, '7.3%', score==5, '12.0%', score==6, '16.0%', score==7, '23.0%', score==8, '27.0%', '>36.0%')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "Score range 0-14. Higher score = higher 30-day mortality risk"
        }
      },
      "test": [
        {
          "input": {
            "age_75": 0,
            "age_65_74": 1,
            "diabetes_htn_angina": 1,
            "sbp_lt_100": 0,
            "hr_gt_100": 0,
            "killip_2to4": 0,
            "weight_lt_67": 0,
            "anterior_stemi_lbbb": 1,
            "time_gt_4h": 0
          },
          "output": {
            "score": 4,
            "mortality": "7.3%"
          }
        }
      ],
      "ref": {
        "Morrow DA, et al. Circulation. 2000;102(17):2031-7.": "pubmed:11044416"
      }
    },
    "timi_nstemi": {
      "name": "TIMI Risk Score (UA/NSTEMI)",
      "input": {
        "age_65": {
          "label": "Age ≥65 years",
          "type": "onoff"
        },
        "cad_risk": {
          "label": "≥3 CAD risk factors",
          "type": "onoff"
        },
        "known_cad": {
          "label": "Known CAD (stenosis ≥50%)",
          "type": "onoff"
        },
        "asa": {
          "label": "ASA use in past 7 days",
          "type": "onoff"
        },
        "severe_angina": {
          "label": "Severe angina (≥2 episodes within 24h)",
          "type": "onoff"
        },
        "st_changes": {
          "label": "ST changes ≥0.5mm",
          "type": "onoff"
        },
        "elevated_markers": {
          "label": "Elevated cardiac markers",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "TIMI Risk Score",
          "formula": "age_65 + cad_risk + known_cad + asa + severe_angina + st_changes + elevated_markers"
        },
        "risk": {
          "label": "14-day Risk (Death/MI/Urgent revasc)",
          "formula": "iif(score<=1, '4.7% (Low risk)', score==2, '8.3%', score==3, '13.2%', score==4, '19.9%', score==5, '26.2%', '41.0% (High risk)')"
        }
      },
      "test": [
        {
          "input": {
            "age_65": 1,
            "cad_risk": 1,
            "known_cad": 0,
            "asa": 1,
            "severe_angina": 1,
            "st_changes": 1,
            "elevated_markers": 1
          },
          "output": {
            "score": 6
          }
        }
      ],
      "ref": {
        "Antman EM, et al. JAMA. 2000;284(7):835-42.": "pubmed:10938172"
      }
    },
    "grace": {
      "name": "GRACE Score (ACS)",
      "input": {
        "age": {
          "label": "Age [years]",
          "type": "int",
          "min": 20,
          "max": 120
        },
        "heart_rate": {
          "label": "Heart Rate [bpm]",
          "type": "int",
          "min": 30,
          "max": 250
        },
        "sbp": {
          "label": "Systolic BP [mmHg]",
          "type": "int",
          "min": 50,
          "max": 250
        },
        "creatinine": {
          "label": "Creatinine [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 20
        },
        "killip_class": {
          "label": "Killip Class",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "I - No heart failure"
            },
            {
              "value": 15,
              "label": "II - Rales/JVD"
            },
            {
              "value": 29,
              "label": "III - Pulmonary edema"
            },
            {
              "value": 43,
              "label": "IV - Cardiogenic shock"
            }
          ]
        },
        "cardiac_arrest": {
          "label": "Cardiac Arrest at admission",
          "type": "onoff"
        },
        "st_deviation": {
          "label": "ST segment deviation",
          "type": "onoff"
        },
        "elevated_enzymes": {
          "label": "Elevated cardiac enzymes",
          "type": "onoff"
        }
      },
      "output": {
        "age_points": {
          "label": "Age points",
          "formula": "iif(age<30, 0, age<40, 8, age<50, 25, age<60, 41, age<70, 58, age<80, 75, age<90, 91, 100)"
        },
        "hr_points": {
          "label": "HR points",
          "formula": "iif(heart_rate<50, 0, heart_rate<70, 3, heart_rate<90, 9, heart_rate<110, 15, heart_rate<150, 24, heart_rate<200, 38, 46)"
        },
        "sbp_points": {
          "label": "SBP points",
          "formula": "iif(sbp<80, 58, sbp<100, 53, sbp<120, 43, sbp<140, 34, sbp<160, 24, sbp<200, 10, 0)"
        },
        "creat_points": {
          "label": "Creatinine points",
          "formula": "iif(creatinine<0.4, 1, creatinine<0.8, 4, creatinine<1.2, 7, creatinine<1.6, 10, creatinine<2.0, 13, creatinine<4.0, 21, 28)"
        },
        "score": {
          "label": "GRACE Score",
          "formula": "age_points + hr_points + sbp_points + creat_points + killip_class + cardiac_arrest*39 + st_deviation*28 + elevated_enzymes*14"
        },
        "hospital_mortality": {
          "label": "In-hospital Mortality",
          "formula": "iif(score<=108, '<1% (Low)', score<=140, '1-3% (Intermediate)', '>3% (High)')"
        },
        "six_month_mortality": {
          "label": "6-month Mortality",
          "formula": "iif(score<=88, '<3% (Low)', score<=118, '3-8% (Intermediate)', '>8% (High)')"
        }
      },
      "test": [
        {
          "input": {
            "age": 65,
            "heart_rate": 85,
            "sbp": 130,
            "creatinine": 1,
            "killip_class": 0,
            "cardiac_arrest": 0,
            "st_deviation": 1,
            "elevated_enzymes": 1
          },
          "output": {
            "score": 150
          }
        }
      ],
      "ref": {
        "Fox KA, et al. BMJ. 2006;333(7578):1091.": "pubmed:17032691",
        "Granger CB, et al. Arch Intern Med. 2003;163(19):2345-53.": "pubmed:14581255"
      }
    },
    "heart_score": {
      "name": "HEART Score",
      "input": {
        "history": {
          "label": "History",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Slightly suspicious"
            },
            {
              "value": 1,
              "label": "1 - Moderately suspicious"
            },
            {
              "value": 2,
              "label": "2 - Highly suspicious"
            }
          ]
        },
        "ecg": {
          "label": "ECG",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Normal"
            },
            {
              "value": 1,
              "label": "1 - Non-specific repolarization disturbance"
            },
            {
              "value": 2,
              "label": "2 - Significant ST depression"
            }
          ]
        },
        "age": {
          "label": "Age",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - <45 years"
            },
            {
              "value": 1,
              "label": "1 - 45-64 years"
            },
            {
              "value": 2,
              "label": "2 - ≥65 years"
            }
          ]
        },
        "risk_factors": {
          "label": "Risk Factors",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No risk factors"
            },
            {
              "value": 1,
              "label": "1 - 1-2 risk factors"
            },
            {
              "value": 2,
              "label": "2 - ≥3 risk factors or history of atherosclerotic disease"
            }
          ]
        },
        "troponin": {
          "label": "Troponin",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Normal"
            },
            {
              "value": 1,
              "label": "1 - 1-3× normal limit"
            },
            {
              "value": 2,
              "label": "2 - >3× normal limit"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "HEART Score",
          "formula": "history + ecg + age + risk_factors + troponin"
        },
        "risk": {
          "label": "6-week MACE Risk",
          "formula": "iif(score<=3, '0.9-1.7% (Low risk)', score<=6, '12-16.6% (Moderate risk)', '50-65% (High risk)')"
        },
        "disposition": {
          "label": "Recommendation",
          "formula": "iif(score<=3, 'Consider discharge', score<=6, 'Observe and further evaluate', 'Urgent cardiology consultation')"
        }
      },
      "test": [
        {
          "input": {
            "history": 1,
            "ecg": 1,
            "age": 1,
            "risk_factors": 1,
            "troponin": 0
          },
          "output": {
            "score": 4,
            "risk": "12-16.6% (Moderate risk)"
          }
        }
      ],
      "ref": {
        "Six AJ, et al. Neth Heart J. 2008;16(6):191-6.": "pubmed:18665203",
        "Backus BE, et al. Arch Intern Med. 2010;170(15):1342-7.": "pubmed:20696966"
      }
    },
    "wells_pe": {
      "name": "Wells Score for Pulmonary Embolism",
      "input": {
        "previous_pe_dvt": {
          "label": "Previous PE or DVT",
          "type": "onoff"
        },
        "hr_gt_100": {
          "label": "Heart Rate >100 bpm",
          "type": "onoff"
        },
        "surgery_immobilization": {
          "label": "Surgery or immobilization within 4 weeks",
          "type": "onoff"
        },
        "hemoptysis": {
          "label": "Hemoptysis",
          "type": "onoff"
        },
        "active_cancer": {
          "label": "Active cancer",
          "type": "onoff"
        },
        "clinical_signs_dvt": {
          "label": "Clinical signs of DVT",
          "type": "onoff"
        },
        "alternative_less_likely": {
          "label": "Alternative diagnosis less likely than PE",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Wells Score",
          "formula": "previous_pe_dvt*1.5 + hr_gt_100*1.5 + surgery_immobilization*1.5 + hemoptysis + active_cancer + clinical_signs_dvt*3 + alternative_less_likely*3"
        },
        "risk": {
          "label": "PE Probability",
          "formula": "iif(score<2, 'Low risk (1.3%)', score<=6, 'Moderate risk (16.2%)', 'High risk (40.6%)')"
        },
        "recommendation": {
          "label": "Recommendation",
          "formula": "iif(score<2, 'Consider D-dimer', score<=6, 'Consider CT angiography', 'CT angiography indicated')"
        }
      },
      "test": [
        {
          "input": {
            "previous_pe_dvt": 0,
            "hr_gt_100": 1,
            "surgery_immobilization": 0,
            "hemoptysis": 0,
            "active_cancer": 0,
            "clinical_signs_dvt": 0,
            "alternative_less_likely": 1
          },
          "output": {
            "score": 4.5,
            "risk": "Moderate risk (16.2%)"
          }
        }
      ],
      "ref": {
        "Wells PS, et al. Thromb Haemost. 2000;83(3):416-20.": "pubmed:10744147"
      }
    },
    "wells_dvt": {
      "name": "Wells Score for DVT",
      "input": {
        "active_cancer": {
          "label": "Active cancer",
          "type": "onoff"
        },
        "paralysis_paresis": {
          "label": "Paralysis, paresis, or recent cast",
          "type": "onoff"
        },
        "bedridden_surgery": {
          "label": "Bedridden >3 days or major surgery within 12 weeks",
          "type": "onoff"
        },
        "tenderness": {
          "label": "Localized tenderness along deep venous system",
          "type": "onoff"
        },
        "entire_leg_swollen": {
          "label": "Entire leg swollen",
          "type": "onoff"
        },
        "calf_swelling": {
          "label": "Calf swelling >3cm compared to other leg",
          "type": "onoff"
        },
        "pitting_edema": {
          "label": "Pitting edema (greater in symptomatic leg)",
          "type": "onoff"
        },
        "collateral_veins": {
          "label": "Collateral superficial veins",
          "type": "onoff"
        },
        "alternative_diagnosis": {
          "label": "Alternative diagnosis as likely or more likely",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Wells Score",
          "formula": "active_cancer + paralysis_paresis + bedridden_surgery + tenderness + entire_leg_swollen + calf_swelling + pitting_edema + collateral_veins - alternative_diagnosis*2"
        },
        "probability": {
          "label": "DVT Probability",
          "formula": "iif(score<=0, 'Low risk (5%)', score<=2, 'Moderate risk (17%)', 'High risk (53%)')"
        },
        "recommendation": {
          "label": "Recommendation",
          "formula": "iif(score<=0, 'D-dimer recommended', score<=2, 'D-dimer or ultrasound', 'Ultrasound indicated')"
        }
      },
      "test": [
        {
          "input": {
            "active_cancer": 0,
            "paralysis_paresis": 0,
            "bedridden_surgery": 0,
            "tenderness": 1,
            "entire_leg_swollen": 0,
            "calf_swelling": 1,
            "pitting_edema": 1,
            "collateral_veins": 0,
            "alternative_diagnosis": 0
          },
          "output": {
            "score": 3,
            "probability": "High risk (53%)"
          }
        }
      ],
      "ref": {
        "Wells PS, et al. Lancet. 1997;350(9094):1795-8.": "pubmed:9428249"
      }
    },
    "modified_geneva": {
      "name": "Modified Geneva Score",
      "input": {
        "age_gt_65": {
          "label": "Age >65 years",
          "type": "onoff"
        },
        "previous_pe_dvt": {
          "label": "Previous PE or DVT",
          "type": "onoff"
        },
        "surgery_fracture": {
          "label": "Surgery or fracture within 1 month",
          "type": "onoff"
        },
        "active_malignancy": {
          "label": "Active malignancy",
          "type": "onoff"
        },
        "unilateral_pain": {
          "label": "Unilateral lower limb pain",
          "type": "onoff"
        },
        "hemoptysis": {
          "label": "Hemoptysis",
          "type": "onoff"
        },
        "hr_75_94": {
          "label": "Heart rate 75-94 bpm",
          "type": "onoff"
        },
        "hr_gt_94": {
          "label": "Heart rate ≥95 bpm",
          "type": "onoff"
        },
        "pain_edema": {
          "label": "Pain on palpation and unilateral edema",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Modified Geneva Score",
          "formula": "age_gt_65 + previous_pe_dvt*3 + surgery_fracture*2 + active_malignancy*2 + unilateral_pain*3 + hemoptysis*2 + hr_75_94*3 + hr_gt_94*5 + pain_edema*4"
        },
        "probability": {
          "label": "PE Probability",
          "formula": "iif(score<=3, 'Low (8%)', score<=10, 'Intermediate (28%)', 'High (74%)')"
        }
      },
      "test": [
        {
          "input": {
            "age_gt_65": 1,
            "previous_pe_dvt": 0,
            "surgery_fracture": 0,
            "active_malignancy": 0,
            "unilateral_pain": 0,
            "hemoptysis": 0,
            "hr_75_94": 1,
            "hr_gt_94": 0,
            "pain_edema": 0
          },
          "output": {
            "score": 4,
            "probability": "Intermediate (28%)"
          }
        }
      ],
      "ref": {
        "Le Gal G, et al. Ann Intern Med. 2006;144(3):165-71.": "pubmed:16461960"
      }
    },
    "ascvd": {
      "name": "ASCVD Risk Calculator (10-year)",
      "input": {
        "age": {
          "label": "Age [years]",
          "type": "int",
          "min": 40,
          "max": 79
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        },
        "race": {
          "label": "Race",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "White"
            },
            {
              "value": 1,
              "label": "African American"
            },
            {
              "value": 2,
              "label": "Other"
            }
          ]
        },
        "total_chol": {
          "label": "Total Cholesterol [mg/dL]",
          "type": "int",
          "min": 130,
          "max": 320
        },
        "hdl": {
          "label": "HDL Cholesterol [mg/dL]",
          "type": "int",
          "min": 20,
          "max": 100
        },
        "sbp": {
          "label": "Systolic BP [mmHg]",
          "type": "int",
          "min": 90,
          "max": 200
        },
        "bp_treated": {
          "label": "On BP medication",
          "type": "onoff"
        },
        "diabetes": {
          "label": "Diabetes",
          "type": "onoff"
        },
        "smoker": {
          "label": "Current smoker",
          "type": "onoff"
        }
      },
      "output": {
        "risk_simple": {
          "label": "Estimated 10-year ASCVD Risk (%)",
          "formula": "iif(age<50 and diabetes==0 and smoker==0 and sbp<140 and total_chol<200, '<5% (Low)', age<60 and diabetes==0 and sbp<140, '5-7.5% (Borderline)', '7.5-20% or >20% (Intermediate to High) - Use full calculator')",
          "text": "Simplified estimate. For accurate calculation, use online calculator with race-specific coefficients."
        },
        "recommendation": {
          "label": "Statin Recommendation",
          "text": "Risk ≥7.5%: Consider statin. Risk ≥20%: High-intensity statin recommended. Discuss with clinician-patient risk discussion."
        },
        "note": {
          "label": "Note",
          "text": "This is a simplified version. Full calculation requires race-specific logarithmic coefficients. Use official ACC/AHA calculator for precise risk."
        }
      },
      "test": [
        {
          "input": {
            "age": 55,
            "sex": 1,
            "race": 0,
            "total_chol": 200,
            "hdl": 50,
            "sbp": 130,
            "bp_treated": 0,
            "diabetes": 0,
            "smoker": 0
          },
          "output": {
            "risk_simple": "5-7.5% (Borderline)"
          }
        }
      ],
      "ref": {
        "Goff DC Jr, et al. Circulation. 2014;129(25 Suppl 2):S49-73.": "pubmed:24222018",
        "ACC/AHA Risk Calculator": "https://tools.acc.org/ASCVD-Risk-Estimator-Plus"
      }
    }
  },
  "Endocrinology and Metabolism": {
    "osmotic_pressure": {
      "name": "Osmotic Pressure",
      "input": {
        "na": {
          "label": "Na [mEq/L]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "k": {
          "label": "K [mEq/L]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "bun": {
          "label": "BUN [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "glucose": {
          "label": "Glucose [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 3000
        }
      },
      "output": {
        "osm": {
          "label": "Plasma Osmolarity [mOsm/kg]",
          "formula": "2*(na+k)+glucose/18+bun/2.8",
          "precision": 1
        },
        "reference": {
          "label": "Reference [mOsm/kg]",
          "text": "285-295"
        }
      },
      "test": [
        {
          "input": {
            "na": 140,
            "k": 4,
            "bun": 15,
            "glucose": 100
          },
          "output": {
            "osm": 298.9
          }
        }
      ]
    },
    "homa": {
      "name": "HOMA-IR, HOMA-β",
      "input": {
        "fpg": {
          "label": "Fasting Plasma Glucose [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 800
        },
        "iri": {
          "label": "Fasting Immunoreactive Insulin [μU/mL]",
          "type": "float",
          "min": 0,
          "max": 100
        }
      },
      "output": {
        "homa_ir": {
          "label": "HOMA-IR (Insulin Resistance)",
          "formula": "iri*fpg/405",
          "precision": 2
        },
        "homa_ir_ref": {
          "label": "HOMA-IR Reference",
          "text": "≤1.6, ≥2.5 indicates insulin resistance"
        },
        "homa_beta": {
          "label": "HOMA-β (β-cell function)",
          "formula": "iri*360/(fpg-63)",
          "precision": 1
        },
        "homa_beta_ref": {
          "label": "HOMA-β Reference [%]",
          "text": "40-60%, ≤30% indicates decreased secretion"
        },
        "quicki": {
          "label": "QUICKI (Insulin Sensitivity)",
          "formula": "1/((log(fpg) + log(iri))/log(10))",
          "precision": 3
        },
        "quicki_ref": {
          "label": "QUICKI Reference",
          "text": "<0.3: resistance, 0.348-0.430: normal, ≥3.0: high sensitivity (type 1 DM)"
        }
      },
      "test": [
        {
          "input": {
            "fpg": 100,
            "iri": 10
          },
          "output": {
            "homa_ir": 2.47
          }
        }
      ],
      "ref": {
        "J Clin Endocrinol Metab. 2000 Jul;85(7):2402-10.": "pubmed:10902785"
      }
    },
    "friedewald": {
      "name": "LDL Cholesterol (Friedewald Equation)",
      "input": {
        "tc": {
          "label": "Total Cholesterol [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "hdl": {
          "label": "HDL Cholesterol [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "tg": {
          "label": "Triglycerides [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        }
      },
      "output": {
        "ldl": {
          "label": "LDL Cholesterol [mg/dL]",
          "formula": "tc-hdl-tg/5",
          "precision": 1
        },
        "warning": {
          "label": "Caution",
          "text": "If TG ≥400 mg/dL, measure LDL directly"
        }
      },
      "test": [
        {
          "input": {
            "tc": 220,
            "hdl": 50,
            "tg": 150
          },
          "output": {
            "ldl": 140
          }
        }
      ],
      "ref": {
        "Friedewald WT: Clin Chem. 1972 Jun;18(6):499-502.": "pubmed:4337382"
      }
    },
    "sampson_nih": {
      "name": "LDL Cholesterol (Sampson-NIH Equation)",
      "input": {
        "tc": {
          "label": "Total Cholesterol [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "hdl": {
          "label": "HDL Cholesterol [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "tg": {
          "label": "Triglycerides [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        }
      },
      "output": {
        "ldl": {
          "label": "LDL Cholesterol [mg/dL]",
          "formula": "tc/0.948-hdl/0.971-tg/18+9",
          "precision": 1
        },
        "note": {
          "label": "Note",
          "text": "Valid for TG < 800 mg/dL; more accurate than Friedewald at low LDL-C and high TG"
        }
      },
      "test": [
        {
          "input": {
            "tc": 220,
            "hdl": 50,
            "tg": 150
          },
          "output": {
            "ldl": 181.2
          }
        }
      ],
      "ref": {
        "Sampson M, et al: J Am Coll Cardiol. 2020;75(7):739-743.": "doi:10.1016/j.jacc.2019.12.044",
        "Improved estimation of LDL-C from Friedewald formula: A database-based study.": "pubmed:32078676"
      }
    },
    "igf1_zscore": {
      "name": "IGF-1 Z-Score",
      "input": {
        "age": {
          "label": "Age [years]",
          "type": "float",
          "min": 0,
          "max": 77
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        },
        "igf1": {
          "label": "IGF-1 [ng/mL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "method": {
          "label": "Assay Method",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "IGF-I IRMA 'Daiichi'"
            },
            {
              "value": 2,
              "label": "Somatomedin-C II 'Bayer'"
            }
          ]
        }
      },
      "output": {
        "igf1_corrected": {
          "label": "IGF-1 Corrected [ng/mL]",
          "formula": "method == 1 ? igf1 : 18.03 + 0.822 * igf1",
          "precision": 1
        },
        "zscore": {
          "label": "Z-Score",
          "formula": "CalculateIGF1ZScore(igf1_corrected, age, sex)",
          "precision": 2
        },
        "percentile": {
          "label": "Percentile",
          "formula": "CalculatePercentileFromZScore(zscore)",
          "precision": 1
        },
        "minus_2sd": {
          "label": "-2SD [ng/mL]",
          "formula": "CalculateIGF1ValueFromZScore(-2, age, sex)",
          "precision": 1
        },
        "mean": {
          "label": "Mean [ng/mL]",
          "formula": "CalculateIGF1ValueFromZScore(0, age, sex)",
          "precision": 1
        },
        "plus_2sd": {
          "label": "+2SD [ng/mL]",
          "formula": "CalculateIGF1ValueFromZScore(2, age, sex)",
          "precision": 1
        }
      },
      "ref": {
        "成長ホルモン及びIGF-Ⅰ測定の標準化に関する研究": "http://www.fgs.or.jp/public/05/2008_03.html",
        "Isojima T et al. Standardized centile curves and reference intervals of serum insulin-like growth factor-I ( IGF-I ) levels in a normal Japanese population using the LMS method 2012;59(9):771–80.": "pubmed:22673406"
      }
    }
  },
  "Renal Function": {
    "ccr_adult": {
      "name": "CCr, eGFR (Adult)",
      "input": {
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 3,
          "max": 300
        },
        "age": {
          "label": "Age [years]",
          "type": "float",
          "min": 17,
          "max": 100
        },
        "scr": {
          "label": "Serum Creatinine [mg/dL]",
          "type": "float",
          "min": 0.001,
          "max": 20
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "cockcroft": {
          "label": "CCr [mL/min] (Cockcroft-Gault)",
          "formula": "sex==1 ? ((140-age) * weight) / (72 * scr) : (((140-age) * weight) / (72 * scr)) * 0.85",
          "precision": 2
        },
        "mdrd_original": {
          "label": "GFR [mL/min/1.73m²] (MDRD original)",
          "formula": "sex==1 ? 186 * age ^ -0.203 * scr ^ -1.154 : (186 * age ^ -0.203 * scr ^ -1.154) * 0.742",
          "precision": 2
        },
        "mdrd_japanese": {
          "label": "GFR [mL/min/1.73m²] (Japanese MDRD)",
          "formula": "sex==1 ? 175 * age ^ -0.203 * scr ^ -1.154 * 0.741 : (175 * age ^ -0.203 * scr ^ -1.154) * 0.741 * 0.742",
          "precision": 2
        },
        "egfr": {
          "label": "GFR [mL/min/1.73m²] (Japanese eGFR equation)",
          "formula": "sex==1 ? 194 * age ^ -0.287 * scr ^ -1.094 : (194 * age ^ -0.287 * scr ^ -1.094) * 0.739",
          "precision": 2
        }
      },
      "test": [
        {
          "input": {
            "weight": 70,
            "age": 50,
            "scr": 1,
            "sex": 1
          },
          "output": {
            "cockcroft": 87.5
          }
        }
      ],
      "ref": {
        "Cockcroft DW, Gault MH": "",
        "MDRD Study Group": "",
        "Japanese eGFR equation": ""
      }
    },
    "ccr_measured": {
      "name": "CCr from Serum/Urine Creatinine",
      "input": {
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 10,
          "max": 300
        },
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 0,
          "max": 300
        },
        "urine_cr": {
          "label": "Urine Creatinine [mg/dL]",
          "type": "float",
          "min": 0.001,
          "max": 1000
        },
        "serum_cr": {
          "label": "Serum Creatinine [mg/dL]",
          "type": "float",
          "min": 0.001,
          "max": 100
        },
        "urine_volume": {
          "label": "24h Urine Volume [mL/day]",
          "type": "float",
          "min": 1,
          "max": 50000
        }
      },
      "output": {
        "ccr": {
          "label": "CCr [mL/min/1.73m²]",
          "formula": "urine_cr * (urine_volume/24/60) / serum_cr * 1.73 / BSA_DuBois(height, weight)",
          "precision": 2
        }
      },
      "test": [
        {
          "input": {
            "height": 170,
            "weight": 70,
            "urine_cr": 100,
            "serum_cr": 1,
            "urine_volume": 1440
          },
          "output": {
            "ccr": 95.6
          }
        }
      ],
      "ref": {
        "Wikipedia": "http://ja.wikipedia.org/wiki/%E3%82%AF%E3%83%AC%E3%82%A2%E3%83%81%E3%83%8B%E3%83%B3%E3%82%AF%E3%83%AA%E3%82%A2%E3%83%A9%E3%83%B3%E3%82%B9"
      }
    },
    "cystatin_c_age": {
      "name": "eGFR from Cystatin C and Age (18+)",
      "input": {
        "cystatin_c": {
          "label": "Serum Cystatin C [mg/L]",
          "type": "float",
          "min": 0,
          "max": 100
        },
        "age": {
          "label": "Age [years]",
          "type": "float",
          "min": 0,
          "max": 100
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "egfr_cys": {
          "label": "eGFRcys [mL/min/1.73m²]",
          "formula": "(104 * cystatin_c ^ -1.019 * 0.996 ^ age * (sex ? 1 : 0.929)) - 8",
          "precision": 2
        }
      },
      "assert": [
        {
          "condition": "age >= 18",
          "message": "This formula is for age 18 and older"
        }
      ],
      "test": [
        {
          "input": {
            "cystatin_c": 1,
            "age": 50,
            "sex": 1
          },
          "output": {
            "egfr_cys": 77.11
          }
        }
      ],
      "ref": {
        "CKD診療ガイドライン2018": "https://cdn.jsn.or.jp/data/CKD2018.pdf"
      }
    },
    "cystatin_c": {
      "name": "eGFR from Cystatin C",
      "input": {
        "cystatin_c": {
          "label": "Serum Cystatin C [mg/L]",
          "type": "float",
          "min": 0,
          "max": 100
        }
      },
      "output": {
        "hoek": {
          "label": "eGFR [mL/min/1.73m²] (Hoek)",
          "formula": "80.35/cystatin_c-4.32",
          "precision": 2
        },
        "grubb_adult": {
          "label": "eGFR [mL/min/1.73m²] (Grubb 14+ years)",
          "formula": "84.69 * cystatin_c ^ -1.680",
          "precision": 2
        },
        "grubb_child": {
          "label": "eGFR [mL/min/1.73m²] (Grubb <14 years)",
          "formula": "84.69 * cystatin_c ^ -1.680 * 1.384",
          "precision": 2
        },
        "filler": {
          "label": "eGFR [mL/min/1.73m²] (Filler; pediatric)",
          "formula": "91.62 * cystatin_c ^ -1.123",
          "precision": 2
        }
      },
      "test": [
        {
          "input": {
            "cystatin_c": 1
          },
          "output": {
            "hoek": 76.03
          }
        }
      ],
      "ref": {
        "Nephrol Dial Transplant. 2003 Oct;18(10):2024-31.": "pubmed:13679476",
        "Nephrol Dial Transplant. 2008 Jan;23(1):154-60. Epub 2007 Oct 2.": "pubmed:17911090"
      }
    },
    "ccr_child": {
      "name": "eGFR (Child)",
      "input": {
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 3,
          "max": 300
        },
        "scr": {
          "label": "Serum Creatinine (enzymatic) [mg/dL]",
          "type": "float",
          "min": 0.001,
          "max": 20
        },
        "k": {
          "label": "Age Constant k",
          "type": "select",
          "options": [
            {
              "value": 0.33,
              "label": "Low birth weight infant"
            },
            {
              "value": 0.45,
              "label": "Normal birth weight infant"
            },
            {
              "value": 0.55,
              "label": "2-12 years or Female (13-21 years)"
            },
            {
              "value": 0.7,
              "label": "Male (13-21 years)"
            }
          ]
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "schwartz": {
          "label": "eGFR [mL/min/1.73m²] (Schwartz)",
          "formula": "k*height/(scr+0.2)",
          "precision": 2
        },
        "schwartz_2009": {
          "label": "eGFR [mL/min/1.73m²] (Schwartz 2009; 7.7-14.3y)",
          "formula": "0.413 * height / scr",
          "precision": 2
        },
        "japanese_child": {
          "label": "eGFR [mL/min/1.73m²] (Japanese child equation; 2-19y)",
          "formula": "CalculateJapaneseChildeGFR(height, scr, sex)",
          "precision": 2
        }
      },
      "assert": [
        {
          "condition": "not (k == 0.7 and sex == 0)",
          "message": "Male (13-21 years) k value cannot be selected with Female sex"
        }
      ],
      "test": [
        {
          "input": {
            "height": 120,
            "scr": 0.7,
            "k": 0.55,
            "sex": 1
          },
          "output": {
            "schwartz": 73.33
          }
        }
      ],
      "ref": {
        "Minds": "http://minds.jcqhc.or.jp/n/med/4/med0067/G0000189/0142",
        "New Equations to Estimate GFR in Children with CKD": "pubmed:19158356"
      }
    },
    "fena": {
      "name": "FENa Calculation",
      "input": {
        "sodium_serum": {
          "label": "Serum Na [mEq/L]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "creatinine_serum": {
          "label": "Serum Cre [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "sodium_urine": {
          "label": "Urine Na [mEq/L]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "creatinine_urine": {
          "label": "Urine Cre [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        }
      },
      "output": {
        "fena": {
          "label": "FENa [%]",
          "formula": "(sodium_urine*creatinine_serum)/(sodium_serum*creatinine_urine)*100",
          "precision": 2
        },
        "reference": {
          "label": "Reference",
          "text": "Normal: <1%, Renal failure: >1%"
        }
      },
      "test": [
        {
          "input": {
            "sodium_serum": 140,
            "creatinine_serum": 1,
            "sodium_urine": 56,
            "creatinine_urine": 56
          },
          "output": {
            "fena": 0.71
          }
        }
      ]
    },
    "trp": {
      "name": "%TRP Calculation",
      "input": {
        "phosphate_serum": {
          "label": "Serum P [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "creatinine_serum": {
          "label": "Serum Cre [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "phosphate_urine": {
          "label": "Urine P [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "creatinine_urine": {
          "label": "Urine Cre [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 1000
        }
      },
      "output": {
        "trp": {
          "label": "%TRP",
          "formula": "(1-(phosphate_urine*creatinine_serum)/(phosphate_serum*creatinine_urine))*100",
          "precision": 1
        },
        "tmp_gfr": {
          "label": "TmP/GFR [mg/dL]",
          "formula": "trp * phosphate_serum / 100",
          "precision": 2
        }
      },
      "test": [
        {
          "input": {
            "phosphate_serum": 4,
            "creatinine_serum": 1,
            "phosphate_urine": 20,
            "creatinine_urine": 100
          },
          "output": {
            "trp": 95,
            "tmp_gfr": 3.8
          }
        }
      ]
    },
    "ckd_epi_2021": {
      "name": "CKD-EPI 2021 (Creatinine-Cystatin C)",
      "input": {
        "scr": {
          "label": "Serum Creatinine [mg/dL]",
          "type": "float",
          "min": 0.1,
          "max": 20
        },
        "cystatin_c": {
          "label": "Serum Cystatin C [mg/L]",
          "type": "float",
          "min": 0.1,
          "max": 20
        },
        "age": {
          "label": "Age [years]",
          "type": "float",
          "min": 18,
          "max": 120
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "egfr_2021": {
          "label": "eGFR [mL/min/1.73m²] (CKD-EPI 2021)",
          "formula": "142 * min(scr/(sex?0.9:0.7), 1)^(sex?-0.302:-0.241) * max(scr/(sex?0.9:0.7), 1)^-1.2 * min(cystatin_c/0.8, 1)^-0.171 * max(cystatin_c/0.8, 1)^-0.193 * 0.9938^age * (sex?1:1.012)",
          "precision": 2
        }
      },
      "test": [
        {
          "input": {
            "scr": 1,
            "cystatin_c": 1,
            "age": 50,
            "sex": 1
          },
          "output": {
            "egfr_2021": 87.83
          }
        }
      ],
      "ref": {
        "Inker LA, et al. N Engl J Med 2021;385:629-638": "doi:10.1056/NEJMoa2104365"
      }
    },
    "kdigo_ckd": {
      "name": "KDIGO CKD Category",
      "input": {
        "gfr": {
          "label": "eGFR [mL/min/1.73m²]",
          "type": "float",
          "min": 0,
          "max": 200
        },
        "acr": {
          "label": "Albumin-Creatinine Ratio [mg/g]",
          "type": "float",
          "min": 0,
          "max": 5000
        }
      },
      "output": {
        "gfr_category": {
          "label": "GFR Category",
          "formula": "iif(gfr>=90, 'G1 (Normal or high)', gfr>=60, 'G2 (Mildly decreased)', gfr>=45, 'G3a (Mild-moderate decrease)', gfr>=30, 'G3b (Moderate-severe decrease)', gfr>=15, 'G4 (Severely decreased)', 'G5 (Kidney failure)')"
        },
        "albuminuria_category": {
          "label": "Albuminuria Category",
          "formula": "iif(acr<30, 'A1 (Normal to mildly increased)', acr<300, 'A2 (Moderately increased)', 'A3 (Severely increased)')"
        },
        "risk": {
          "label": "Risk of CKD Progression",
          "formula": "iif(gfr>=60 and acr<30, 'Green (low risk)', gfr>=60 and acr<300, 'Yellow (moderate risk)', gfr>=45 and acr<30, 'Yellow (moderate risk)', gfr>=30 and acr<30, 'Orange (high risk)', gfr>=15 and acr<30, 'Red (very high risk)', 'Red (very high risk)')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "KDIGO 2012 CKD classification. Combines GFR and albuminuria categories for risk stratification."
        }
      },
      "test": [
        {
          "input": {
            "gfr": 55,
            "acr": 150
          },
          "output": {
            "gfr_category": "G3a (Mild-moderate decrease)",
            "albuminuria_category": "A2 (Moderately increased)"
          }
        }
      ],
      "ref": {
        "KDIGO 2012 Clinical Practice Guideline": "https://kdigo.org/guidelines/ckd-evaluation-and-management/"
      }
    },
    "kdigo_aki": {
      "name": "KDIGO AKI Stage",
      "input": {
        "scr_increase": {
          "label": "Serum Creatinine Increase",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "No AKI criteria met"
            },
            {
              "value": 1,
              "label": "Stage 1: ≥0.3 mg/dL increase or 1.5-1.9x baseline"
            },
            {
              "value": 2,
              "label": "Stage 2: 2.0-2.9x baseline"
            },
            {
              "value": 3,
              "label": "Stage 3: ≥3.0x baseline or ≥4.0 mg/dL or RRT"
            }
          ]
        },
        "urine_output": {
          "label": "Urine Output",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "No oliguria"
            },
            {
              "value": 1,
              "label": "Stage 1: <0.5 mL/kg/h for 6-12h"
            },
            {
              "value": 2,
              "label": "Stage 2: <0.5 mL/kg/h for ≥12h"
            },
            {
              "value": 3,
              "label": "Stage 3: <0.3 mL/kg/h for ≥24h or anuria ≥12h"
            }
          ]
        }
      },
      "output": {
        "aki_stage": {
          "label": "AKI Stage",
          "formula": "max(scr_increase, urine_output)"
        },
        "stage_description": {
          "label": "Stage",
          "formula": "iif(aki_stage==0, 'No AKI', aki_stage==1, 'Stage 1 AKI', aki_stage==2, 'Stage 2 AKI', 'Stage 3 AKI')"
        },
        "recommendation": {
          "label": "Management",
          "formula": "iif(aki_stage==0, 'No specific AKI management', aki_stage==1, 'Monitor closely, address reversible causes', aki_stage==2, 'Intensive monitoring, nephrology consultation', 'Consider RRT, urgent nephrology consultation')"
        }
      },
      "test": [
        {
          "input": {
            "scr_increase": 2,
            "urine_output": 1
          },
          "output": {
            "aki_stage": 2,
            "stage_description": "Stage 2 AKI"
          }
        }
      ],
      "ref": {
        "KDIGO Clinical Practice Guideline for AKI. Kidney Int Suppl. 2012;2(1):1-138": "https://kdigo.org/guidelines/acute-kidney-injury/"
      }
    }
  },
  "Pulmonology": {
    "aado2": {
      "name": "A-aDO₂",
      "input": {
        "fio2": {
          "label": "FiO₂",
          "type": "float",
          "min": 0,
          "max": 1
        },
        "pao2": {
          "label": "PaO₂ [mmHg]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "paco2": {
          "label": "PaCO₂ [mmHg]",
          "type": "float",
          "min": 0,
          "max": 1000
        }
      },
      "output": {
        "aado2": {
          "label": "A-aDO₂",
          "formula": "(760-47)*fio2-paco2/0.8-pao2",
          "precision": 1
        },
        "reference": {
          "label": "Reference",
          "text": "Normal: ≤10"
        }
      },
      "test": [
        {
          "input": {
            "fio2": 0.21,
            "pao2": 100,
            "paco2": 40
          },
          "output": {
            "aado2": -0.3
          }
        }
      ]
    },
    "psi": {
      "name": "Pneumonia Severity Index (PSI)",
      "input": {
        "age": {
          "label": "Age [years]",
          "type": "float",
          "min": 0,
          "max": 150
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        },
        "nursing_home": {
          "label": "Nursing Home Resident",
          "type": "onoff"
        },
        "neoplastic": {
          "label": "Malignancy",
          "type": "onoff"
        },
        "liver": {
          "label": "Liver Disease",
          "type": "onoff"
        },
        "congestive_hf": {
          "label": "Congestive Heart Failure",
          "type": "onoff"
        },
        "cerebrovascular": {
          "label": "Cerebrovascular Disease",
          "type": "onoff"
        },
        "renal": {
          "label": "Renal Disease",
          "type": "onoff"
        },
        "altered_mental": {
          "label": "Altered Mental Status",
          "type": "onoff"
        },
        "pulse_gt_125": {
          "label": "Pulse ≥125 bpm",
          "type": "onoff"
        },
        "rr_gt_30": {
          "label": "Respiratory Rate >30 bpm",
          "type": "onoff"
        },
        "sbp_lt_90": {
          "label": "Systolic BP <90 mmHg",
          "type": "onoff"
        },
        "temp_abnormal": {
          "label": "Temperature <35°C or ≥40°C",
          "type": "onoff"
        },
        "ph_lt_7_35": {
          "label": "Arterial pH <7.35",
          "type": "onoff"
        },
        "bun_ge_30": {
          "label": "BUN ≥30 mg/dL",
          "type": "onoff"
        },
        "na_lt_130": {
          "label": "Na <130 mEq/L",
          "type": "onoff"
        },
        "glucose_ge_250": {
          "label": "Glucose ≥250 mg/dL",
          "type": "onoff"
        },
        "hematocrit_lt_30": {
          "label": "Ht <30%",
          "type": "onoff"
        },
        "pao2_lt_60": {
          "label": "PaO₂ <60 mmHg",
          "type": "onoff"
        },
        "pleural_effusion": {
          "label": "Pleural Effusion",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Score",
          "formula": "(sex ? age : age - 10) + nursing_home*10 + neoplastic*30 + liver*20 + congestive_hf*10 + cerebrovascular*10 + renal*10 + altered_mental*20 + pulse_gt_125*20 + rr_gt_30*20 + sbp_lt_90*15 + temp_abnormal*10 + ph_lt_7_35*30 + bun_ge_30*20 + na_lt_130*20 + glucose_ge_250*10 + hematocrit_lt_30*10 + pao2_lt_60*10 + pleural_effusion*10"
        },
        "class": {
          "label": "Class",
          "formula": "CalculatePSIClass(age, altered_mental, pulse_gt_125, rr_gt_30, sbp_lt_90, temp_abnormal, neoplastic, congestive_hf, cerebrovascular, renal, liver, score)"
        },
        "mortality": {
          "label": "Mortality (PORT Study) [%]",
          "formula": "CalculatePSIMortality(class)"
        }
      },
      "ref": {
        "Wikipedia": "http://en.wikipedia.org/wiki/Pneumonia_severity_index"
      }
    },
    "adrop": {
      "name": "A-DROP Score",
      "input": {
        "age": {
          "label": "Age (Male ≥70 / Female ≥75)",
          "type": "onoff"
        },
        "dehydration": {
          "label": "BUN ≥21 or Dehydration",
          "type": "onoff"
        },
        "respiratory_failure": {
          "label": "SpO₂≤90% (PaO₂≤60 Torr)",
          "type": "onoff"
        },
        "orientation": {
          "label": "Disturbance of Consciousness",
          "type": "onoff"
        },
        "pressure": {
          "label": "sBP≤90 mmHg",
          "type": "onoff"
        }
      },
      "output": {
        "count": {
          "label": "Count",
          "formula": "age + dehydration + respiratory_failure + orientation + pressure"
        },
        "judgment": {
          "label": "Judgment",
          "formula": "iif(count==0, 'Outpatient', count<=2, 'Outpatient or Hospitalization', count==3, 'Hospitalization', 'ICU admission')"
        },
        "note": {
          "label": "Note",
          "text": "If shock present, consider severe regardless of count"
        }
      },
      "test": [
        {
          "input": {
            "age": 1,
            "dehydration": 0,
            "respiratory_failure": 1,
            "orientation": 0,
            "pressure": 0
          },
          "output": {
            "count": 2
          }
        }
      ],
      "ref": {
        "Japanese Respiratory Society": ""
      }
    },
    "venous_to_arterial_blood_gas": {
      "name": "Central Venous to Arterial Blood Gas",
      "input": {
        "ph": {
          "label": "pH",
          "type": "float",
          "min": 5,
          "max": 9
        },
        "pvco2": {
          "label": "pvCO₂ [mmHg]",
          "type": "float",
          "min": 0,
          "max": 200
        },
        "pvhco3": {
          "label": "pvHCO₃⁻ [mEq/L]",
          "type": "float",
          "min": 0,
          "max": 80
        }
      },
      "output": {
        "arterial_ph": {
          "label": "Arterial pH",
          "formula": "-0.307 + 1.05 * ph",
          "precision": 2
        },
        "paco2": {
          "label": "paCO₂ [mmHg]",
          "formula": "0.805 + 0.936 * pvco2",
          "precision": 1
        },
        "Pahco3": {
          "label": "paHCO₃⁻ [mEq/L]",
          "formula": "0.513 + 0.94 * pvhco3",
          "precision": 1
        }
      },
      "test": [
        {
          "input": {
            "ph": 7.4,
            "pvco2": 45,
            "pvhco3": 24
          },
          "output": {
            "arterial_ph": 7.46,
            "paco2": 42.9,
            "Pahco3": 23.1
          }
        }
      ],
      "ref": {
        "Agreement between central venous and arterial blood gas measurements in the intensive care unit.": "doi:10.2215/CJN.00330109"
      }
    },
    "curb65": {
      "name": "CURB-65 Score",
      "input": {
        "confusion": {
          "label": "Confusion (new onset)",
          "type": "onoff"
        },
        "urea": {
          "label": "BUN >20 mg/dL (or Urea >7 mmol/L)",
          "type": "onoff"
        },
        "respiratory_rate": {
          "label": "Respiratory Rate ≥30/min",
          "type": "onoff"
        },
        "blood_pressure": {
          "label": "SBP <90 or DBP ≤60 mmHg",
          "type": "onoff"
        },
        "age_65": {
          "label": "Age ≥65 years",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "CURB-65 Score",
          "formula": "confusion + urea + respiratory_rate + blood_pressure + age_65"
        },
        "mortality": {
          "label": "30-day Mortality",
          "formula": "iif(score==0, '0.7%', score==1, '3.2%', score==2, '13.0%', score==3, '17.0%', score==4, '41.5%', '57.0%')"
        },
        "recommendation": {
          "label": "Recommendation",
          "formula": "iif(score<=1, 'Outpatient treatment', score<=2, 'Consider short hospitalization', 'Hospitalization, consider ICU if score ≥4')"
        }
      },
      "test": [
        {
          "input": {
            "confusion": 0,
            "urea": 0,
            "respiratory_rate": 1,
            "blood_pressure": 0,
            "age_65": 1
          },
          "output": {
            "score": 2,
            "mortality": "13.0%"
          }
        }
      ],
      "ref": {
        "Lim WS, et al. Thorax. 2003;58(5):377-82.": "pubmed:12728155"
      }
    },
    "bode_index": {
      "name": "BODE Index (COPD)",
      "input": {
        "fev1_percent": {
          "label": "FEV1 (% predicted)",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "≥65%"
            },
            {
              "value": 1,
              "label": "50-64%"
            },
            {
              "value": 2,
              "label": "36-49%"
            },
            {
              "value": 3,
              "label": "≤35%"
            }
          ]
        },
        "distance_6mwt": {
          "label": "6-Minute Walk Distance",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "≥350 meters"
            },
            {
              "value": 1,
              "label": "250-349 meters"
            },
            {
              "value": 2,
              "label": "150-249 meters"
            },
            {
              "value": 3,
              "label": "<150 meters"
            }
          ]
        },
        "mmrc": {
          "label": "mMRC Dyspnea Scale",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0-1 (Not troubled/short of breath when hurrying)"
            },
            {
              "value": 1,
              "label": "2 (Walks slower than peers)"
            },
            {
              "value": 2,
              "label": "3 (Stops after ~100m)"
            },
            {
              "value": 3,
              "label": "4 (Too breathless to leave house)"
            }
          ]
        },
        "bmi": {
          "label": "BMI",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": ">21"
            },
            {
              "value": 1,
              "label": "≤21"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "BODE Index",
          "formula": "fev1_percent + distance_6mwt + mmrc + bmi"
        },
        "quartile": {
          "label": "Quartile",
          "formula": "iif(score<=2, 'Q1 (0-2)', score<=4, 'Q2 (3-4)', score<=6, 'Q3 (5-6)', 'Q4 (7-10)')"
        },
        "mortality_4year": {
          "label": "4-year Mortality",
          "formula": "iif(score<=2, '~19%', score<=4, '~32%', score<=6, '~36%', '~80%')"
        }
      },
      "test": [
        {
          "input": {
            "fev1_percent": 2,
            "distance_6mwt": 1,
            "mmrc": 2,
            "bmi": 0
          },
          "output": {
            "score": 5,
            "quartile": "Q3 (5-6)"
          }
        }
      ],
      "ref": {
        "Celli BR, et al. N Engl J Med. 2004;350(10):1005-12.": "pubmed:14999112"
      }
    },
    "gold_copd": {
      "name": "GOLD COPD Classification",
      "input": {
        "fev1_percent": {
          "label": "FEV1/FVC <0.7 and FEV1 (% predicted)",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "GOLD 1: FEV1 ≥80%"
            },
            {
              "value": 2,
              "label": "GOLD 2: 50% ≤ FEV1 <80%"
            },
            {
              "value": 3,
              "label": "GOLD 3: 30% ≤ FEV1 <50%"
            },
            {
              "value": 4,
              "label": "GOLD 4: FEV1 <30%"
            }
          ]
        },
        "exacerbations": {
          "label": "Exacerbations in past year",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0-1 (not leading to hospitalization)"
            },
            {
              "value": 1,
              "label": "≥2 or ≥1 leading to hospitalization"
            }
          ]
        },
        "symptoms": {
          "label": "Symptoms (mMRC or CAT)",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Low symptoms (mMRC 0-1, CAT <10)"
            },
            {
              "value": 1,
              "label": "High symptoms (mMRC ≥2, CAT ≥10)"
            }
          ]
        }
      },
      "output": {
        "grade": {
          "label": "GOLD Grade",
          "formula": "fev1_percent"
        },
        "group": {
          "label": "GOLD Group (ABE)",
          "formula": "iif(exacerbations==0 and symptoms==0, 'Group A', exacerbations==0 and symptoms==1, 'Group B', 'Group E')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "Group A: Low risk, fewer symptoms. Group B: Low risk, more symptoms. Group E: High risk (≥2 exacerbations or ≥1 hospitalization)"
        }
      },
      "test": [
        {
          "input": {
            "fev1_percent": 2,
            "exacerbations": 0,
            "symptoms": 1
          },
          "output": {
            "grade": 2,
            "group": "Group B"
          }
        }
      ],
      "ref": {
        "GOLD 2023 Report": "https://goldcopd.org/",
        "Global Strategy for the Diagnosis, Management, and Prevention of COPD": "https://goldcopd.org/2023-gold-report-2/"
      }
    }
  },
  "Hepatology": {
    "child_pugh": {
      "name": "Child-Pugh Score",
      "input": {
        "bilirubin": {
          "label": "Bilirubin [mg/dL]",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "<2"
            },
            {
              "value": 2,
              "label": "2-3"
            },
            {
              "value": 3,
              "label": ">3"
            }
          ]
        },
        "albumin": {
          "label": "Albumin [g/dL]",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": ">3.5"
            },
            {
              "value": 2,
              "label": "2.8-3.5"
            },
            {
              "value": 3,
              "label": "<2.8"
            }
          ]
        },
        "inr": {
          "label": "INR",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "<1.7"
            },
            {
              "value": 2,
              "label": "1.7-2.3"
            },
            {
              "value": 3,
              "label": ">2.3"
            }
          ]
        },
        "ascites": {
          "label": "Ascites",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "None"
            },
            {
              "value": 2,
              "label": "Mild (controlled with diuretics)"
            },
            {
              "value": 3,
              "label": "Moderate to severe"
            }
          ]
        },
        "encephalopathy": {
          "label": "Hepatic Encephalopathy",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "None"
            },
            {
              "value": 2,
              "label": "Grade 1-2 (or controlled with medication)"
            },
            {
              "value": 3,
              "label": "Grade 3-4"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "Child-Pugh Score",
          "formula": "bilirubin + albumin + inr + ascites + encephalopathy"
        },
        "class": {
          "label": "Child-Pugh Class",
          "formula": "iif(score<=6, 'Class A (Well-compensated)', score<=9, 'Class B (Significant functional compromise)', 'Class C (Decompensated)')"
        },
        "one_year_survival": {
          "label": "1-year Survival",
          "formula": "iif(score<=6, '~100%', score<=9, '~80%', '~45%')"
        },
        "two_year_survival": {
          "label": "2-year Survival",
          "formula": "iif(score<=6, '~85%', score<=9, '~60%', '~35%')"
        }
      },
      "test": [
        {
          "input": {
            "bilirubin": 2,
            "albumin": 2,
            "inr": 2,
            "ascites": 1,
            "encephalopathy": 1
          },
          "output": {
            "score": 8,
            "class": "Class B (Significant functional compromise)"
          }
        }
      ],
      "ref": {
        "Child CG, Turcotte JG. Surgery. 1964;3:50-59.": "",
        "Pugh RN, et al. Br J Surg. 1973;60(8):646-9.": "pubmed:4541913"
      }
    },
    "meld": {
      "name": "MELD 3.0 Score",
      "input": {
        "creatinine": {
          "label": "Creatinine [mg/dL]",
          "type": "float",
          "min": 0.1,
          "max": 20
        },
        "bilirubin": {
          "label": "Total Bilirubin [mg/dL]",
          "type": "float",
          "min": 0.1,
          "max": 50
        },
        "inr": {
          "label": "INR",
          "type": "float",
          "min": 0.5,
          "max": 10
        },
        "sodium": {
          "label": "Sodium [mEq/L]",
          "type": "float",
          "min": 100,
          "max": 200
        },
        "albumin": {
          "label": "Albumin [g/dL]",
          "type": "float",
          "min": 0.5,
          "max": 10
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "creat_adj": {
          "label": "Adjusted Creatinine",
          "formula": "max(1, min(3, creatinine))"
        },
        "bili_adj": {
          "label": "Adjusted Bilirubin",
          "formula": "max(1, bilirubin)"
        },
        "inr_adj": {
          "label": "Adjusted INR",
          "formula": "max(1, inr)"
        },
        "sodium_adj": {
          "label": "Adjusted Sodium",
          "formula": "max(125, min(137, sodium))"
        },
        "albumin_adj": {
          "label": "Adjusted Albumin",
          "formula": "max(1.5, min(3.5, albumin))"
        },
        "meld_score": {
          "label": "MELD 3.0 Score",
          "formula": "1.33*(sex==1?1:0) + 4.56*log(bili_adj) + 0.82*(137-sodium_adj) - 0.24*(137-sodium_adj)*log(bili_adj) + 9.09*log(inr_adj) + 11.14*log(creat_adj) + 1.85*(3.5-albumin_adj) - 1.83*(3.5-albumin_adj)*log(creat_adj) + 6",
          "precision": 1
        },
        "mortality_3month": {
          "label": "3-month Mortality (approximate)",
          "formula": "iif(meld_score<10, '~1.9%', meld_score<20, '~6%', meld_score<30, '~20%', meld_score<40, '~50%', '>70%')"
        }
      },
      "test": [
        {
          "input": {
            "creatinine": 1.2,
            "bilirubin": 2.5,
            "inr": 1.8,
            "sodium": 135,
            "albumin": 3,
            "sex": 1
          },
          "output": {
            "meld_score": 20.8
          }
        }
      ],
      "ref": {
        "Kim WR, et al. Hepatology. 2021;73(6):2235-2239.": "pubmed:33506981",
        "MELD 3.0: The Model for End-Stage Liver Disease": "doi:10.1002/hep.31750"
      }
    }
  },
  "Gastroenterology": {
    "ranson": {
      "name": "Ranson Criteria (Pancreatitis)",
      "input": {
        "age_gt_55": {
          "label": "Age >55 years",
          "type": "onoff"
        },
        "wbc_gt_16": {
          "label": "WBC >16,000/μL",
          "type": "onoff"
        },
        "glucose_gt_200": {
          "label": "Glucose >200 mg/dL",
          "type": "onoff"
        },
        "ldh_gt_350": {
          "label": "LDH >350 IU/L",
          "type": "onoff"
        },
        "ast_gt_250": {
          "label": "AST >250 IU/L",
          "type": "onoff"
        },
        "hct_drop_10": {
          "label": "Hct drop >10%",
          "type": "onoff"
        },
        "bun_rise_5": {
          "label": "BUN rise >5 mg/dL",
          "type": "onoff"
        },
        "calcium_lt_8": {
          "label": "Ca <8 mg/dL",
          "type": "onoff"
        },
        "pao2_lt_60": {
          "label": "PaO₂ <60 mmHg",
          "type": "onoff"
        },
        "base_deficit_gt_4": {
          "label": "Base deficit >4 mEq/L",
          "type": "onoff"
        },
        "fluid_seq_gt_6l": {
          "label": "Fluid sequestration >6L",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Ranson Score",
          "formula": "age_gt_55 + wbc_gt_16 + glucose_gt_200 + ldh_gt_350 + ast_gt_250 + hct_drop_10 + bun_rise_5 + calcium_lt_8 + pao2_lt_60 + base_deficit_gt_4 + fluid_seq_gt_6l"
        },
        "mortality": {
          "label": "Mortality",
          "formula": "iif(score<=2, '<1%', score<=4, '~15%', score<=6, '~40%', '>50%')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "First 5 criteria at admission, remaining 6 at 48h. Score ≥3 indicates severe pancreatitis"
        }
      },
      "test": [
        {
          "input": {
            "age_gt_55": 1,
            "wbc_gt_16": 0,
            "glucose_gt_200": 1,
            "ldh_gt_350": 0,
            "ast_gt_250": 0,
            "hct_drop_10": 0,
            "bun_rise_5": 0,
            "calcium_lt_8": 0,
            "pao2_lt_60": 0,
            "base_deficit_gt_4": 0,
            "fluid_seq_gt_6l": 0
          },
          "output": {
            "score": 2,
            "mortality": "<1%"
          }
        }
      ],
      "ref": {
        "Ranson JH, et al. Surg Gynecol Obstet. 1974;139(1):69-81.": "pubmed:4834279"
      }
    },
    "bisap": {
      "name": "BISAP Score (Pancreatitis)",
      "input": {
        "bun_gt_25": {
          "label": "BUN >25 mg/dL",
          "type": "onoff"
        },
        "impaired_mental": {
          "label": "Impaired mental status (GCS <15)",
          "type": "onoff"
        },
        "sirs": {
          "label": "SIRS present (≥2 criteria)",
          "type": "onoff"
        },
        "age_gt_60": {
          "label": "Age >60 years",
          "type": "onoff"
        },
        "pleural_effusion": {
          "label": "Pleural effusion present",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "BISAP Score",
          "formula": "bun_gt_25 + impaired_mental + sirs + age_gt_60 + pleural_effusion"
        },
        "mortality": {
          "label": "In-hospital Mortality",
          "formula": "iif(score==0, '<1%', score==1, '<2%', score==2, '~2%', score==3, '~5%', score==4, '~15%', '>20%')"
        },
        "severe_pancreatitis": {
          "label": "Risk of Severe Pancreatitis",
          "formula": "iif(score>=3, 'High risk', 'Low risk')"
        }
      },
      "test": [
        {
          "input": {
            "bun_gt_25": 0,
            "impaired_mental": 0,
            "sirs": 1,
            "age_gt_60": 0,
            "pleural_effusion": 0
          },
          "output": {
            "score": 1,
            "mortality": "<2%"
          }
        }
      ],
      "ref": {
        "Wu BU, et al. Gut. 2008;57(12):1698-703.": "pubmed:18519429"
      }
    },
    "glasgow_imrie": {
      "name": "Glasgow-Imrie Score (Pancreatitis)",
      "input": {
        "age_gt_55": {
          "label": "Age >55 years",
          "type": "onoff"
        },
        "wbc_gt_15": {
          "label": "WBC >15,000/μL",
          "type": "onoff"
        },
        "glucose_gt_180": {
          "label": "Glucose >180 mg/dL",
          "type": "onoff"
        },
        "bun_gt_45": {
          "label": "BUN >45 mg/dL",
          "type": "onoff"
        },
        "pao2_lt_60": {
          "label": "PaO₂ <60 mmHg",
          "type": "onoff"
        },
        "albumin_lt_32": {
          "label": "Albumin <3.2 g/dL",
          "type": "onoff"
        },
        "calcium_lt_8": {
          "label": "Calcium <8 mg/dL",
          "type": "onoff"
        },
        "ldh_gt_600": {
          "label": "LDH >600 IU/L",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Glasgow-Imrie Score",
          "formula": "age_gt_55 + wbc_gt_15 + glucose_gt_180 + bun_gt_45 + pao2_lt_60 + albumin_lt_32 + calcium_lt_8 + ldh_gt_600"
        },
        "severity": {
          "label": "Severity",
          "formula": "iif(score<=2, 'Mild pancreatitis', 'Severe pancreatitis')"
        },
        "mortality": {
          "label": "Mortality Risk",
          "formula": "iif(score<=2, '~0-2%', score<=4, '~15%', '>40%')"
        }
      },
      "test": [
        {
          "input": {
            "age_gt_55": 0,
            "wbc_gt_15": 0,
            "glucose_gt_180": 0,
            "bun_gt_45": 0,
            "pao2_lt_60": 0,
            "albumin_lt_32": 0,
            "calcium_lt_8": 0,
            "ldh_gt_600": 0
          },
          "output": {
            "score": 0,
            "severity": "Mild pancreatitis"
          }
        }
      ],
      "ref": {
        "Blamey SL, et al. Gut. 1984;25(12):1340-6.": "pubmed:6510766"
      }
    }
  },
  "Obstetrics and Pediatrics": {
    "apgar": {
      "name": "Apgar Score",
      "input": {
        "appearance": {
          "label": "Appearance (Color)",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Blue/pale all over"
            },
            {
              "value": 1,
              "label": "1 - Body pink, extremities blue"
            },
            {
              "value": 2,
              "label": "2 - Pink all over"
            }
          ]
        },
        "pulse": {
          "label": "Pulse (Heart rate)",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Absent"
            },
            {
              "value": 1,
              "label": "1 - <100 bpm"
            },
            {
              "value": 2,
              "label": "2 - ≥100 bpm"
            }
          ]
        },
        "grimace": {
          "label": "Grimace (Reflex irritability)",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No response"
            },
            {
              "value": 1,
              "label": "1 - Grimace"
            },
            {
              "value": 2,
              "label": "2 - Cry/cough/sneeze"
            }
          ]
        },
        "activity": {
          "label": "Activity (Muscle tone)",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Limp"
            },
            {
              "value": 1,
              "label": "1 - Some flexion"
            },
            {
              "value": 2,
              "label": "2 - Active movement"
            }
          ]
        },
        "respiration": {
          "label": "Respiration",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Absent"
            },
            {
              "value": 1,
              "label": "1 - Slow/irregular"
            },
            {
              "value": 2,
              "label": "2 - Good/crying"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "Apgar Score",
          "formula": "appearance + pulse + grimace + activity + respiration"
        },
        "interpretation": {
          "label": "Interpretation",
          "formula": "iif(score>=7, 'Normal (7-10)', score>=4, 'Moderately abnormal (4-6)', 'Low (0-3) - needs immediate resuscitation')"
        },
        "note": {
          "label": "Note",
          "text": "Assessed at 1 and 5 minutes after birth. Score at 5 min is more predictive of outcome."
        }
      },
      "test": [
        {
          "input": {
            "appearance": 2,
            "pulse": 2,
            "grimace": 2,
            "activity": 2,
            "respiration": 2
          },
          "output": {
            "score": 10,
            "interpretation": "Normal (7-10)"
          }
        }
      ],
      "ref": {
        "Apgar V. Curr Res Anesth Analg. 1953;32(4):260-7.": "pubmed:13083014"
      }
    },
    "silverman_andersen": {
      "name": "Silverman-Andersen Score",
      "input": {
        "chest_retraction": {
          "label": "Upper Chest Retraction",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Synchronized"
            },
            {
              "value": 1,
              "label": "1 - Lag on inspiration"
            },
            {
              "value": 2,
              "label": "2 - See-saw respiration"
            }
          ]
        },
        "intercostal": {
          "label": "Intercostal Retraction",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - None"
            },
            {
              "value": 1,
              "label": "1 - Just visible"
            },
            {
              "value": 2,
              "label": "2 - Marked"
            }
          ]
        },
        "xiphoid": {
          "label": "Xiphoid Retraction",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - None"
            },
            {
              "value": 1,
              "label": "1 - Just visible"
            },
            {
              "value": 2,
              "label": "2 - Marked"
            }
          ]
        },
        "nares": {
          "label": "Nares Dilation",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - None"
            },
            {
              "value": 1,
              "label": "1 - Minimal"
            },
            {
              "value": 2,
              "label": "2 - Marked"
            }
          ]
        },
        "grunt": {
          "label": "Expiratory Grunt",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - None"
            },
            {
              "value": 1,
              "label": "1 - Audible with stethoscope"
            },
            {
              "value": 2,
              "label": "2 - Audible without stethoscope"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "Silverman-Andersen Score",
          "formula": "chest_retraction + intercostal + xiphoid + nares + grunt"
        },
        "severity": {
          "label": "Respiratory Distress",
          "formula": "iif(score==0, 'No distress', score<=3, 'Mild distress', score<=6, 'Moderate distress', 'Severe distress')"
        }
      },
      "test": [
        {
          "input": {
            "chest_retraction": 1,
            "intercostal": 1,
            "xiphoid": 0,
            "nares": 1,
            "grunt": 1
          },
          "output": {
            "score": 4,
            "severity": "Moderate distress"
          }
        }
      ],
      "ref": {
        "Silverman WA, Andersen DH. Pediatrics. 1956;17(1):1-10.": "pubmed:13283022"
      }
    },
    "pews": {
      "name": "Pediatric Early Warning Score (PEWS)",
      "input": {
        "behavior": {
          "label": "Behavior",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Playing/appropriate"
            },
            {
              "value": 1,
              "label": "Sleeping"
            },
            {
              "value": 2,
              "label": "Irritable"
            },
            {
              "value": 3,
              "label": "Lethargic/confused"
            }
          ]
        },
        "cardiovascular": {
          "label": "Cardiovascular",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Pink/capillary refill 1-2 sec"
            },
            {
              "value": 1,
              "label": "Pale/capillary refill 3 sec"
            },
            {
              "value": 2,
              "label": "Gray/capillary refill 4 sec"
            },
            {
              "value": 3,
              "label": "Mottled/capillary refill ≥5 sec"
            }
          ]
        },
        "respiratory": {
          "label": "Respiratory",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Within normal parameters"
            },
            {
              "value": 1,
              "label": ">10 above normal or O₂"
            },
            {
              "value": 2,
              "label": ">20 above normal or FiO₂ ≥30%"
            },
            {
              "value": 3,
              "label": "Below normal or FiO₂ ≥50%"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "PEWS",
          "formula": "behavior + cardiovascular + respiratory"
        },
        "action": {
          "label": "Recommended Action",
          "formula": "iif(score<=2, 'Continue routine care', score<=4, 'Increase observation frequency', 'Urgent medical review required')"
        }
      },
      "test": [
        {
          "input": {
            "behavior": 1,
            "cardiovascular": 0,
            "respiratory": 1
          },
          "output": {
            "score": 2,
            "action": "Continue routine care"
          }
        }
      ],
      "ref": {
        "Monaghan A. Paediatr Nurs. 2005;17(3):38.": "pubmed:15871596"
      }
    },
    "westley_croup": {
      "name": "Westley Croup Score",
      "input": {
        "inspiratory_stridor": {
          "label": "Inspiratory Stridor",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "None"
            },
            {
              "value": 1,
              "label": "When agitated"
            },
            {
              "value": 2,
              "label": "At rest"
            }
          ]
        },
        "retractions": {
          "label": "Retractions",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "None"
            },
            {
              "value": 1,
              "label": "Mild"
            },
            {
              "value": 2,
              "label": "Moderate"
            },
            {
              "value": 3,
              "label": "Severe"
            }
          ]
        },
        "air_entry": {
          "label": "Air Entry",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Normal"
            },
            {
              "value": 1,
              "label": "Decreased"
            },
            {
              "value": 2,
              "label": "Markedly decreased"
            }
          ]
        },
        "cyanosis": {
          "label": "Cyanosis",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "None"
            },
            {
              "value": 4,
              "label": "With agitation"
            },
            {
              "value": 5,
              "label": "At rest"
            }
          ]
        },
        "level_of_consciousness": {
          "label": "Level of Consciousness",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Normal"
            },
            {
              "value": 5,
              "label": "Altered"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "Westley Croup Score",
          "formula": "inspiratory_stridor + retractions + air_entry + cyanosis + level_of_consciousness"
        },
        "severity": {
          "label": "Severity",
          "formula": "iif(score<=2, 'Mild croup', score<=7, 'Moderate croup', 'Severe croup')"
        },
        "treatment": {
          "label": "Treatment",
          "formula": "iif(score<=2, 'Dexamethasone', score<=7, 'Nebulized epinephrine + dexamethasone', 'Hospitalization + intensive treatment')"
        }
      },
      "test": [
        {
          "input": {
            "inspiratory_stridor": 1,
            "retractions": 1,
            "air_entry": 0,
            "cyanosis": 0,
            "level_of_consciousness": 0
          },
          "output": {
            "score": 2,
            "severity": "Mild croup"
          }
        }
      ],
      "ref": {
        "Westley CR, et al. Am J Dis Child. 1978;132(5):484-7.": "pubmed:645659"
      }
    },
    "bishop_score": {
      "name": "Bishop Score",
      "input": {
        "dilation": {
          "label": "Cervical Dilation [cm]",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Closed"
            },
            {
              "value": 1,
              "label": "1-2 cm"
            },
            {
              "value": 2,
              "label": "3-4 cm"
            },
            {
              "value": 3,
              "label": "≥5 cm"
            }
          ]
        },
        "effacement": {
          "label": "Cervical Effacement [%]",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0-30%"
            },
            {
              "value": 1,
              "label": "40-50%"
            },
            {
              "value": 2,
              "label": "60-70%"
            },
            {
              "value": 3,
              "label": "≥80%"
            }
          ]
        },
        "station": {
          "label": "Fetal Station",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "-3"
            },
            {
              "value": 1,
              "label": "-2"
            },
            {
              "value": 2,
              "label": "-1 or 0"
            },
            {
              "value": 3,
              "label": "+1 or +2"
            }
          ]
        },
        "consistency": {
          "label": "Cervical Consistency",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Firm"
            },
            {
              "value": 1,
              "label": "Medium"
            },
            {
              "value": 2,
              "label": "Soft"
            }
          ]
        },
        "position": {
          "label": "Cervical Position",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Posterior"
            },
            {
              "value": 1,
              "label": "Mid-position"
            },
            {
              "value": 2,
              "label": "Anterior"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "Bishop Score",
          "formula": "dilation + effacement + station + consistency + position"
        },
        "interpretation": {
          "label": "Interpretation",
          "formula": "iif(score>=8, 'Favorable for induction (high success rate)', score>=5, 'Moderately favorable', 'Unfavorable (consider cervical ripening)')"
        }
      },
      "test": [
        {
          "input": {
            "dilation": 2,
            "effacement": 2,
            "station": 1,
            "consistency": 1,
            "position": 1
          },
          "output": {
            "score": 7,
            "interpretation": "Moderately favorable"
          }
        }
      ],
      "ref": {
        "Bishop EH. Obstet Gynecol. 1964;24:266-8.": "pubmed:14199536"
      }
    }
  },
  "Psychiatry": {
    "phq9": {
      "name": "PHQ-9 (Depression)",
      "input": {
        "interest": {
          "label": "Little interest or pleasure",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "depressed": {
          "label": "Feeling down, depressed, hopeless",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "sleep": {
          "label": "Trouble sleeping or sleeping too much",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "tired": {
          "label": "Feeling tired or having little energy",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "appetite": {
          "label": "Poor appetite or overeating",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "failure": {
          "label": "Feeling bad about yourself",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "concentration": {
          "label": "Trouble concentrating",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "movement": {
          "label": "Moving/speaking slowly or being fidgety",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "suicide": {
          "label": "Thoughts of self-harm",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "PHQ-9 Score",
          "formula": "interest + depressed + sleep + tired + appetite + failure + concentration + movement + suicide"
        },
        "severity": {
          "label": "Depression Severity",
          "formula": "iif(score<5, 'None-minimal', score<10, 'Mild', score<15, 'Moderate', score<20, 'Moderately severe', 'Severe')"
        },
        "suicide_alert": {
          "label": "Suicide Risk",
          "formula": "iif(suicide>0, '⚠ ALERT: Positive suicide ideation - assess further', 'No suicide ideation reported')"
        }
      },
      "test": [
        {
          "input": {
            "interest": 1,
            "depressed": 1,
            "sleep": 1,
            "tired": 2,
            "appetite": 1,
            "failure": 0,
            "concentration": 1,
            "movement": 0,
            "suicide": 0
          },
          "output": {
            "score": 7,
            "severity": "Mild"
          }
        }
      ],
      "ref": {
        "Kroenke K, et al. J Gen Intern Med. 2001;16(9):606-13.": "pubmed:11556941"
      }
    },
    "gad7": {
      "name": "GAD-7 (Anxiety)",
      "input": {
        "nervous": {
          "label": "Feeling nervous, anxious, on edge",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "control": {
          "label": "Not being able to stop or control worrying",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "worry": {
          "label": "Worrying too much about different things",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "relax": {
          "label": "Trouble relaxing",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "restless": {
          "label": "Being so restless that it's hard to sit still",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "annoyed": {
          "label": "Becoming easily annoyed or irritable",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        },
        "afraid": {
          "label": "Feeling afraid something awful might happen",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Not at all"
            },
            {
              "value": 1,
              "label": "1 - Several days"
            },
            {
              "value": 2,
              "label": "2 - More than half the days"
            },
            {
              "value": 3,
              "label": "3 - Nearly every day"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "GAD-7 Score",
          "formula": "nervous + control + worry + relax + restless + annoyed + afraid"
        },
        "severity": {
          "label": "Anxiety Severity",
          "formula": "iif(score<5, 'Minimal', score<10, 'Mild', score<15, 'Moderate', 'Severe')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "Score ≥10: Consider further assessment and treatment. Score ≥15: Active treatment recommended"
        }
      },
      "test": [
        {
          "input": {
            "nervous": 1,
            "control": 1,
            "worry": 2,
            "relax": 1,
            "restless": 1,
            "annoyed": 1,
            "afraid": 0
          },
          "output": {
            "score": 7,
            "severity": "Mild"
          }
        }
      ],
      "ref": {
        "Spitzer RL, et al. Arch Intern Med. 2006;166(10):1092-7.": "pubmed:16717171"
      }
    }
  },
  "Nutrition": {
    "must": {
      "name": "MUST Score (Malnutrition)",
      "input": {
        "bmi": {
          "label": "BMI",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "BMI >20 (>30 if obese)"
            },
            {
              "value": 1,
              "label": "BMI 18.5-20"
            },
            {
              "value": 2,
              "label": "BMI <18.5"
            }
          ]
        },
        "weight_loss": {
          "label": "Unplanned Weight Loss (3-6 months)",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "<5%"
            },
            {
              "value": 1,
              "label": "5-10%"
            },
            {
              "value": 2,
              "label": ">10%"
            }
          ]
        },
        "acute_disease": {
          "label": "Acute Disease Effect",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "No acute disease"
            },
            {
              "value": 2,
              "label": "Acutely ill with no nutritional intake for >5 days"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "MUST Score",
          "formula": "bmi + weight_loss + acute_disease"
        },
        "risk": {
          "label": "Malnutrition Risk",
          "formula": "iif(score==0, 'Low risk', score==1, 'Medium risk', 'High risk')"
        },
        "management": {
          "label": "Management",
          "formula": "iif(score==0, 'Routine clinical care', score==1, 'Observe, repeat screening', 'Refer to dietitian, improve nutrition intake')"
        }
      },
      "test": [
        {
          "input": {
            "bmi": 1,
            "weight_loss": 1,
            "acute_disease": 0
          },
          "output": {
            "score": 2,
            "risk": "High risk"
          }
        }
      ],
      "ref": {
        "Malnutrition Universal Screening Tool (MUST)": "https://www.bapen.org.uk/screening-and-must/must"
      }
    },
    "mifflin_st_jeor": {
      "name": "Mifflin-St Jeor Equation (REE)",
      "input": {
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 10,
          "max": 300
        },
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 50,
          "max": 250
        },
        "age": {
          "label": "Age [years]",
          "type": "int",
          "min": 1,
          "max": 120
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "ree": {
          "label": "Resting Energy Expenditure [kcal/day]",
          "formula": "10*weight + 6.25*height - 5*age + (sex==1?5:-161)",
          "precision": 0
        },
        "note": {
          "label": "Note",
          "text": "Multiply by activity factor: Sedentary (1.2), Light (1.375), Moderate (1.55), Active (1.725), Very Active (1.9)"
        }
      },
      "test": [
        {
          "input": {
            "weight": 70,
            "height": 170,
            "age": 30,
            "sex": 1
          },
          "output": {
            "ree": 1618
          }
        }
      ],
      "ref": {
        "Mifflin MD, et al. Am J Clin Nutr. 1990;51(2):241-7.": "pubmed:2305711"
      }
    },
    "harris_benedict": {
      "name": "Harris-Benedict Equation (BEE)",
      "input": {
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 10,
          "max": 300
        },
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 50,
          "max": 250
        },
        "age": {
          "label": "Age [years]",
          "type": "int",
          "min": 1,
          "max": 120
        },
        "sex": {
          "label": "Sex",
          "type": "sex"
        }
      },
      "output": {
        "bee": {
          "label": "Basal Energy Expenditure [kcal/day]",
          "formula": "sex==1 ? (88.362 + 13.397*weight + 4.799*height - 5.677*age) : (447.593 + 9.247*weight + 3.098*height - 4.330*age)",
          "precision": 0
        },
        "note": {
          "label": "Note",
          "text": "Revised equation (1984). Multiply by activity factor for total energy needs."
        }
      },
      "test": [
        {
          "input": {
            "weight": 70,
            "height": 170,
            "age": 30,
            "sex": 1
          },
          "output": {
            "bee": 1672
          }
        }
      ],
      "ref": {
        "Roza AM, Shizgal HM. Am J Clin Nutr. 1984;40(1):168-82.": "pubmed:6741850"
      }
    }
  },
  "Infectious Diseases": {
    "centor": {
      "name": "Centor/McIsaac Score (Strep Pharyngitis)",
      "input": {
        "tonsillar_exudate": {
          "label": "Tonsillar exudate",
          "type": "onoff"
        },
        "tender_anterior_nodes": {
          "label": "Tender anterior cervical lymphadenopathy",
          "type": "onoff"
        },
        "fever": {
          "label": "History of fever (>38°C)",
          "type": "onoff"
        },
        "no_cough": {
          "label": "Absence of cough",
          "type": "onoff"
        },
        "age": {
          "label": "Age",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "3-14 years"
            },
            {
              "value": 0,
              "label": "15-44 years"
            },
            {
              "value": -1,
              "label": "≥45 years"
            }
          ]
        }
      },
      "output": {
        "centor": {
          "label": "Centor Score (without age)",
          "formula": "tonsillar_exudate + tender_anterior_nodes + fever + no_cough"
        },
        "mcisaac": {
          "label": "McIsaac Score (with age)",
          "formula": "centor + age"
        },
        "strep_probability": {
          "label": "Strep Pharyngitis Probability",
          "formula": "iif(mcisaac<=0, '~1%', mcisaac==1, '~10%', mcisaac==2, '~17%', mcisaac==3, '~35%', '~50%')"
        },
        "recommendation": {
          "label": "Recommendation",
          "formula": "iif(mcisaac<=1, 'No testing or antibiotics', mcisaac<=3, 'Rapid strep test', 'Empiric antibiotics or rapid test')"
        }
      },
      "test": [
        {
          "input": {
            "tonsillar_exudate": 1,
            "tender_anterior_nodes": 1,
            "fever": 1,
            "no_cough": 1,
            "age": 1
          },
          "output": {
            "centor": 4,
            "mcisaac": 5
          }
        }
      ],
      "ref": {
        "Centor RM, et al. Med Decis Making. 1981;1(3):239-46.": "pubmed:6763125",
        "McIsaac WJ, et al. CMAJ. 2004;170(6):1027-33.": "pubmed:15001801"
      }
    },
    "duke_endocarditis": {
      "name": "Duke Criteria for Infective Endocarditis",
      "input": {
        "major_criteria": {
          "label": "Number of Major Criteria",
          "type": "int",
          "min": 0,
          "max": 2
        },
        "minor_criteria": {
          "label": "Number of Minor Criteria",
          "type": "int",
          "min": 0,
          "max": 5
        }
      },
      "output": {
        "diagnosis": {
          "label": "Duke Diagnosis",
          "formula": "iif(major_criteria==2, 'Definite IE', major_criteria==1 and minor_criteria>=3, 'Definite IE', major_criteria==1 and minor_criteria<=2, 'Possible IE', minor_criteria>=3, 'Possible IE', 'Rejected')"
        },
        "major": {
          "label": "Major Criteria (2 types)",
          "text": "1) Positive blood cultures (typical organisms in 2 separate cultures OR persistently positive blood cultures), 2) Evidence of endocardial involvement (vegetation, abscess, new valvular regurgitation on echo)"
        },
        "minor": {
          "label": "Minor Criteria (5 types)",
          "text": "1) Predisposing condition/IVDU, 2) Fever ≥38°C, 3) Vascular phenomena, 4) Immunologic phenomena, 5) Microbiologic evidence not meeting major criteria"
        }
      },
      "test": [
        {
          "input": {
            "major_criteria": 1,
            "minor_criteria": 3
          },
          "output": {
            "diagnosis": "Definite IE"
          }
        }
      ],
      "ref": {
        "Durack DT, et al. Am J Med. 1994;96(3):200-9.": "pubmed:8154507",
        "Li JS, et al. Clin Infect Dis. 2000;30(4):633-8.": "pubmed:10770721"
      }
    }
  },
  "Neurology": {
    "abcd2": {
      "name": "ABCD² Score",
      "input": {
        "age": {
          "label": "Age ≥60",
          "type": "onoff"
        },
        "bp": {
          "label": "sBP≥140 or dBP≥90 mmHg",
          "type": "onoff"
        },
        "clinical": {
          "label": "Clinical Features",
          "type": "select",
          "options": [
            {
              "value": 2,
              "label": "Unilateral weakness"
            },
            {
              "value": 1,
              "label": "Speech disturbance without weakness"
            },
            {
              "value": 0,
              "label": "Other"
            }
          ]
        },
        "duration": {
          "label": "Duration",
          "type": "select",
          "options": [
            {
              "value": 2,
              "label": "≥60 minutes"
            },
            {
              "value": 1,
              "label": "10-59 minutes"
            },
            {
              "value": 0,
              "label": "<10 minutes"
            }
          ]
        },
        "diabetes": {
          "label": "Diabetes",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Score",
          "formula": "age + bp + clinical + duration + diabetes"
        },
        "risk": {
          "label": "Risk",
          "formula": "iif(score>=6, 'High risk 8.1% stroke within 2 days', score>=4, 'Moderate risk 4.1% stroke within 2 days', 'Low risk 1.0% stroke within 2 days')"
        }
      },
      "test": [
        {
          "input": {
            "age": 1,
            "bp": 0,
            "clinical": 2,
            "duration": 1,
            "diabetes": 0
          },
          "output": {
            "score": 4
          }
        }
      ],
      "ref": {
        "Stroke Service; Lancet. 2007 Jan 27;369(9558):283-92.": "pubmed:17258668"
      }
    },
    "abcd2i": {
      "name": "ABCD²-I Score",
      "input": {
        "age": {
          "label": "Age ≥60",
          "type": "onoff"
        },
        "bp": {
          "label": "sBP≥140 or dBP≥90 mmHg",
          "type": "onoff"
        },
        "clinical": {
          "label": "Clinical Features",
          "type": "select",
          "options": [
            {
              "value": 2,
              "label": "Unilateral weakness"
            },
            {
              "value": 1,
              "label": "Speech disturbance without weakness"
            },
            {
              "value": 0,
              "label": "Other"
            }
          ]
        },
        "duration": {
          "label": "Duration",
          "type": "select",
          "options": [
            {
              "value": 2,
              "label": "≥60 minutes"
            },
            {
              "value": 1,
              "label": "10-59 minutes"
            },
            {
              "value": 0,
              "label": "<10 minutes"
            }
          ]
        },
        "diabetes": {
          "label": "Diabetes",
          "type": "onoff"
        },
        "dwi": {
          "label": "DWI lesion present",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "Score",
          "formula": "age + bp + clinical + duration + diabetes + dwi*2"
        },
        "risk": {
          "label": "Risk",
          "formula": "iif(score>=7, 'Very high risk', score>=5, 'High risk', score>=3, 'Moderate risk', 'Low risk')"
        },
        "note": {
          "label": "Note",
          "text": "ABCD²-I adds DWI imaging to ABCD². Score range: 0-9. DWI lesion adds 2 points."
        }
      },
      "test": [
        {
          "input": {
            "age": 1,
            "bp": 0,
            "clinical": 2,
            "duration": 1,
            "diabetes": 0,
            "dwi": 1
          },
          "output": {
            "score": 6
          }
        }
      ],
      "ref": {
        "Merwick A, et al. Stroke. 2010;41(7):1468-73.": "pubmed:20530112",
        "Other references": "doi:10.1001/jamaneurol.2013.4078"
      }
    },
    "lumbar_puncture_depth": {
      "name": "Lumbar Puncture Depth Prediction",
      "input": {
        "height": {
          "label": "Height [cm]",
          "type": "float",
          "min": 30,
          "max": 300
        },
        "weight": {
          "label": "Weight [kg]",
          "type": "float",
          "min": 3,
          "max": 300
        }
      },
      "output": {
        "adult": {
          "label": "Adult [cm]",
          "formula": "1+17*(weight/height)",
          "precision": 1
        },
        "child_3m_plus": {
          "label": "Child (≥3 months) [cm]",
          "formula": "1.3 + 0.07*weight",
          "precision": 1
        },
        "child_lt_3m": {
          "label": "Child (<3 months) [cm]",
          "formula": "height*0.03",
          "precision": 1
        }
      },
      "test": [
        {
          "input": {
            "height": 170,
            "weight": 70
          },
          "output": {
            "adult": 8
          }
        }
      ],
      "ref": {
        "Am J Emerg Med. 2005 Oct;23(6):742-6.": "pubmed:16182981",
        "Coll Antropol. 2003 Dec;27(2):623-6.": "pubmed:14746151",
        "Arch Dis Child. 1997 Nov;77(5):450.": "pubmed:9487973"
      }
    },
    "abr_reference": {
      "name": "ABR Latency Reference Values",
      "input": {
        "wave_i": {
          "label": "Wave I [ms]",
          "type": "float",
          "min": 0,
          "max": 10
        },
        "wave_iii": {
          "label": "Wave III [ms]",
          "type": "float",
          "min": 0,
          "max": 10
        },
        "wave_v": {
          "label": "Wave V [ms]",
          "type": "float",
          "min": 0,
          "max": 10
        },
        "period": {
          "label": "Measurement Period",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "32-33 weeks gestation"
            },
            {
              "value": 1,
              "label": "34-35 weeks gestation"
            },
            {
              "value": 2,
              "label": "36-37 weeks gestation"
            },
            {
              "value": 3,
              "label": "38-39 weeks gestation"
            },
            {
              "value": 4,
              "label": "40-41 weeks gestation"
            },
            {
              "value": 5,
              "label": "42-43 weeks gestation"
            },
            {
              "value": 6,
              "label": "44-45 weeks gestation"
            },
            {
              "value": 7,
              "label": "~5 months"
            },
            {
              "value": 8,
              "label": "6-11 months"
            },
            {
              "value": 9,
              "label": "1 year"
            },
            {
              "value": 10,
              "label": "2-4 years"
            },
            {
              "value": 11,
              "label": "5-13 years"
            },
            {
              "value": 12,
              "label": "Adult"
            }
          ]
        }
      },
      "output": {
        "wave_i_result": {
          "label": "Wave I",
          "formula": "CalculateABRZScore(wave_i, period, 'I')"
        },
        "wave_iii_result": {
          "label": "Wave III",
          "formula": "CalculateABRZScore(wave_iii, period, 'III')"
        },
        "wave_v_result": {
          "label": "Wave V",
          "formula": "CalculateABRZScore(wave_v, period, 'V')"
        },
        "wave_i_iii_result": {
          "label": "Wave I-III",
          "formula": "CalculateABRIIIIntervalZScore(wave_i, wave_iii, period)"
        },
        "wave_i_v_result": {
          "label": "Wave I-V",
          "formula": "CalculateABRVIntervalZScore(wave_i, wave_v, period)"
        },
        "note": {
          "label": "Note",
          "text": "Newborns: 85dBHL, thereafter: 90dBHL"
        }
      },
      "ref": {
        "聴性脳幹反応(Auditory Brainstem Response:ABR)の新生児期への応用 木下洋 関西医大誌 第35巻第3号, 1983": "",
        "小児科診療 2013増刊号 理解して出そう小児の検査―オーダー・手技・解釈": "isbn:4910047260434"
      }
    },
    "gcs": {
      "name": "Glasgow Coma Scale (GCS)",
      "input": {
        "eye": {
          "label": "Eye Response",
          "type": "select",
          "options": [
            {
              "value": 4,
              "label": "4 - Spontaneous"
            },
            {
              "value": 3,
              "label": "3 - To speech"
            },
            {
              "value": 2,
              "label": "2 - To pain"
            },
            {
              "value": 1,
              "label": "1 - None"
            }
          ]
        },
        "verbal": {
          "label": "Verbal Response",
          "type": "select",
          "options": [
            {
              "value": 5,
              "label": "5 - Oriented"
            },
            {
              "value": 4,
              "label": "4 - Confused"
            },
            {
              "value": 3,
              "label": "3 - Inappropriate words"
            },
            {
              "value": 2,
              "label": "2 - Incomprehensible sounds"
            },
            {
              "value": 1,
              "label": "1 - None"
            }
          ]
        },
        "motor": {
          "label": "Motor Response",
          "type": "select",
          "options": [
            {
              "value": 6,
              "label": "6 - Obeys commands"
            },
            {
              "value": 5,
              "label": "5 - Localizing"
            },
            {
              "value": 4,
              "label": "4 - Normal flexion"
            },
            {
              "value": 3,
              "label": "3 - Abnormal flexion"
            },
            {
              "value": 2,
              "label": "2 - Extension"
            },
            {
              "value": 1,
              "label": "1 - None"
            }
          ]
        }
      },
      "output": {
        "total": {
          "label": "GCS Score",
          "formula": "eye + verbal + motor"
        },
        "severity": {
          "label": "Severity",
          "formula": "iif(total>=13, 'Minor injury', total>=9, 'Moderate injury', 'Severe injury')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "13-15: Minor, 9-12: Moderate, 3-8: Severe (coma), 3: Deep coma/brain death"
        }
      },
      "test": [
        {
          "input": {
            "eye": 4,
            "verbal": 5,
            "motor": 6
          },
          "output": {
            "total": 15,
            "severity": "Minor injury"
          }
        },
        {
          "input": {
            "eye": 1,
            "verbal": 1,
            "motor": 2
          },
          "output": {
            "total": 4,
            "severity": "Severe injury"
          }
        }
      ],
      "ref": {
        "Teasdale G, Jennett B: Lancet. 1974;2(7872):81-83.": "pubmed:4136564",
        "Wikipedia": "https://en.wikipedia.org/wiki/Glasgow_Coma_Scale"
      }
    },
    "nihss": {
      "name": "NIHSS (NIH Stroke Scale)",
      "input": {
        "loc": {
          "label": "1a. Level of Consciousness",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Alert"
            },
            {
              "value": 1,
              "label": "1 - Not alert, arousable"
            },
            {
              "value": 2,
              "label": "2 - Not alert, obtunded"
            },
            {
              "value": 3,
              "label": "3 - Unresponsive"
            }
          ]
        },
        "loc_questions": {
          "label": "1b. LOC Questions",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Both correct"
            },
            {
              "value": 1,
              "label": "1 - One correct"
            },
            {
              "value": 2,
              "label": "2 - None correct"
            }
          ]
        },
        "loc_commands": {
          "label": "1c. LOC Commands",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Both correct"
            },
            {
              "value": 1,
              "label": "1 - One correct"
            },
            {
              "value": 2,
              "label": "2 - None correct"
            }
          ]
        },
        "gaze": {
          "label": "2. Best Gaze",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Normal"
            },
            {
              "value": 1,
              "label": "1 - Partial gaze palsy"
            },
            {
              "value": 2,
              "label": "2 - Forced deviation"
            }
          ]
        },
        "visual": {
          "label": "3. Visual Fields",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No visual loss"
            },
            {
              "value": 1,
              "label": "1 - Partial hemianopia"
            },
            {
              "value": 2,
              "label": "2 - Complete hemianopia"
            },
            {
              "value": 3,
              "label": "3 - Bilateral hemianopia"
            }
          ]
        },
        "facial": {
          "label": "4. Facial Palsy",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Normal"
            },
            {
              "value": 1,
              "label": "1 - Minor paralysis"
            },
            {
              "value": 2,
              "label": "2 - Partial paralysis"
            },
            {
              "value": 3,
              "label": "3 - Complete paralysis"
            }
          ]
        },
        "motor_arm_left": {
          "label": "5a. Left Arm Motor",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No drift"
            },
            {
              "value": 1,
              "label": "1 - Drift"
            },
            {
              "value": 2,
              "label": "2 - Some effort against gravity"
            },
            {
              "value": 3,
              "label": "3 - No effort against gravity"
            },
            {
              "value": 4,
              "label": "4 - No movement"
            }
          ]
        },
        "motor_arm_right": {
          "label": "5b. Right Arm Motor",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No drift"
            },
            {
              "value": 1,
              "label": "1 - Drift"
            },
            {
              "value": 2,
              "label": "2 - Some effort against gravity"
            },
            {
              "value": 3,
              "label": "3 - No effort against gravity"
            },
            {
              "value": 4,
              "label": "4 - No movement"
            }
          ]
        },
        "motor_leg_left": {
          "label": "6a. Left Leg Motor",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No drift"
            },
            {
              "value": 1,
              "label": "1 - Drift"
            },
            {
              "value": 2,
              "label": "2 - Some effort against gravity"
            },
            {
              "value": 3,
              "label": "3 - No effort against gravity"
            },
            {
              "value": 4,
              "label": "4 - No movement"
            }
          ]
        },
        "motor_leg_right": {
          "label": "6b. Right Leg Motor",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No drift"
            },
            {
              "value": 1,
              "label": "1 - Drift"
            },
            {
              "value": 2,
              "label": "2 - Some effort against gravity"
            },
            {
              "value": 3,
              "label": "3 - No effort against gravity"
            },
            {
              "value": 4,
              "label": "4 - No movement"
            }
          ]
        },
        "limb_ataxia": {
          "label": "7. Limb Ataxia",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Absent"
            },
            {
              "value": 1,
              "label": "1 - Present in one limb"
            },
            {
              "value": 2,
              "label": "2 - Present in two limbs"
            }
          ]
        },
        "sensory": {
          "label": "8. Sensory",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Normal"
            },
            {
              "value": 1,
              "label": "1 - Mild-to-moderate loss"
            },
            {
              "value": 2,
              "label": "2 - Severe-to-total loss"
            }
          ]
        },
        "language": {
          "label": "9. Best Language",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No aphasia"
            },
            {
              "value": 1,
              "label": "1 - Mild-to-moderate aphasia"
            },
            {
              "value": 2,
              "label": "2 - Severe aphasia"
            },
            {
              "value": 3,
              "label": "3 - Mute/global aphasia"
            }
          ]
        },
        "dysarthria": {
          "label": "10. Dysarthria",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - Normal"
            },
            {
              "value": 1,
              "label": "1 - Mild-to-moderate"
            },
            {
              "value": 2,
              "label": "2 - Severe"
            }
          ]
        },
        "extinction": {
          "label": "11. Extinction/Inattention",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No abnormality"
            },
            {
              "value": 1,
              "label": "1 - Inattention to one modality"
            },
            {
              "value": 2,
              "label": "2 - Profound hemi-inattention"
            }
          ]
        }
      },
      "output": {
        "total": {
          "label": "NIHSS Score",
          "formula": "loc + loc_questions + loc_commands + gaze + visual + facial + motor_arm_left + motor_arm_right + motor_leg_left + motor_leg_right + limb_ataxia + sensory + language + dysarthria + extinction"
        },
        "severity": {
          "label": "Stroke Severity",
          "formula": "iif(total==0, 'No stroke symptoms', total<=4, 'Minor stroke', total<=15, 'Moderate stroke', total<=20, 'Moderate to severe stroke', 'Severe stroke')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "0: No stroke, 1-4: Minor, 5-15: Moderate, 16-20: Moderate-severe, 21-42: Severe. Score >15 suggests high benefit from thrombolysis"
        }
      },
      "test": [
        {
          "input": {
            "loc": 0,
            "loc_questions": 0,
            "loc_commands": 0,
            "gaze": 0,
            "visual": 0,
            "facial": 1,
            "motor_arm_left": 2,
            "motor_arm_right": 0,
            "motor_leg_left": 1,
            "motor_leg_right": 0,
            "limb_ataxia": 0,
            "sensory": 1,
            "language": 1,
            "dysarthria": 0,
            "extinction": 0
          },
          "output": {
            "total": 6,
            "severity": "Moderate stroke"
          }
        }
      ],
      "ref": {
        "Brott T, et al. Stroke. 1989;20(7):864-70.": "pubmed:2749846",
        "NIH Stroke Scale": "https://www.ninds.nih.gov/health-information/public-education/know-stroke/health-professionals/nih-stroke-scale"
      }
    },
    "modified_rankin": {
      "name": "Modified Rankin Scale (mRS)",
      "input": {
        "score": {
          "label": "Modified Rankin Scale",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "0 - No symptoms"
            },
            {
              "value": 1,
              "label": "1 - No significant disability"
            },
            {
              "value": 2,
              "label": "2 - Slight disability"
            },
            {
              "value": 3,
              "label": "3 - Moderate disability"
            },
            {
              "value": 4,
              "label": "4 - Moderately severe disability"
            },
            {
              "value": 5,
              "label": "5 - Severe disability"
            },
            {
              "value": 6,
              "label": "6 - Dead"
            }
          ]
        }
      },
      "output": {
        "result": {
          "label": "Modified Rankin Scale",
          "formula": "score"
        },
        "description": {
          "label": "Description",
          "formula": "iif(score==0, 'No symptoms at all', score==1, 'No significant disability; able to carry out all usual duties', score==2, 'Slight disability; unable to carry out previous activities but able to look after own affairs', score==3, 'Moderate disability; requires some help but able to walk without assistance', score==4, 'Moderately severe disability; unable to walk and attend to bodily needs without assistance', score==5, 'Severe disability; bedridden, incontinent, requires constant care', 'Dead')"
        },
        "functional_outcome": {
          "label": "Functional Outcome",
          "formula": "iif(score<=2, 'Good outcome (independent)', score<=5, 'Poor outcome (dependent)', 'Death')"
        }
      },
      "test": [
        {
          "input": {
            "score": 2
          },
          "output": {
            "result": 2,
            "functional_outcome": "Good outcome (independent)"
          }
        }
      ],
      "ref": {
        "Rankin J. Scott Med J. 1957;2(5):200-15.": "pubmed:13432835",
        "van Swieten JC, et al. Stroke. 1988;19(5):604-7.": "pubmed:3363593"
      }
    },
    "hunt_hess": {
      "name": "Hunt and Hess Classification",
      "input": {
        "grade": {
          "label": "Grade",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "Grade 1 - Asymptomatic or mild headache"
            },
            {
              "value": 2,
              "label": "Grade 2 - Severe headache, nuchal rigidity, no neurologic deficit except CN palsy"
            },
            {
              "value": 3,
              "label": "Grade 3 - Drowsiness, confusion, mild focal deficit"
            },
            {
              "value": 4,
              "label": "Grade 4 - Stupor, moderate-severe hemiparesis"
            },
            {
              "value": 5,
              "label": "Grade 5 - Deep coma, decerebrate rigidity, moribund"
            }
          ]
        }
      },
      "output": {
        "grade": {
          "label": "Hunt and Hess Grade",
          "formula": "grade"
        },
        "description": {
          "label": "Description",
          "formula": "iif(grade==1, 'Asymptomatic or mild headache and slight nuchal rigidity', grade==2, 'Severe headache, nuchal rigidity, no neurologic deficit except CN palsy', grade==3, 'Drowsiness, confusion, mild focal deficit', grade==4, 'Stupor, moderate-severe hemiparesis, early decerebrate rigidity', 'Deep coma, decerebrate rigidity, moribund appearance')"
        },
        "mortality": {
          "label": "Mortality Risk",
          "formula": "iif(grade==1, '~30%', grade==2, '~40%', grade==3, '~50%', grade==4, '~80%', '~90%')"
        }
      },
      "test": [
        {
          "input": {
            "grade": 3
          },
          "output": {
            "grade": 3,
            "mortality": "~50%"
          }
        }
      ],
      "ref": {
        "Hunt WE, Hess RM. J Neurosurg. 1968;28(1):14-20.": "pubmed:5635959"
      }
    },
    "fisher_grade": {
      "name": "Fisher Grade (SAH)",
      "input": {
        "grade": {
          "label": "Fisher Grade",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "Grade 1 - No blood detected"
            },
            {
              "value": 2,
              "label": "Grade 2 - Diffuse thin layer (<1mm)"
            },
            {
              "value": 3,
              "label": "Grade 3 - Localized clot or thick layer (≥1mm)"
            },
            {
              "value": 4,
              "label": "Grade 4 - Diffuse or no SAH with IVH or parenchymal extension"
            }
          ]
        }
      },
      "output": {
        "grade": {
          "label": "Fisher Grade",
          "formula": "grade"
        },
        "vasospasm_risk": {
          "label": "Vasospasm Risk",
          "formula": "iif(grade==1, 'Low (0%)', grade==2, 'Low (10-20%)', grade==3, 'High (60-80%)', 'Moderate (30-40%)')"
        },
        "description": {
          "label": "Description",
          "formula": "iif(grade==1, 'No blood detected on CT', grade==2, 'Diffuse or vertical layers <1mm thick', grade==3, 'Localized clot and/or vertical layer ≥1mm thick', 'Diffuse or no SAH with intraventricular or parenchymal extension')"
        }
      },
      "test": [
        {
          "input": {
            "grade": 3
          },
          "output": {
            "grade": 3,
            "vasospasm_risk": "High (60-80%)"
          }
        }
      ],
      "ref": {
        "Fisher CM, et al. Neurosurgery. 1980;6(1):1-9.": "pubmed:7354892"
      }
    },
    "ich_score": {
      "name": "ICH Score (Intracerebral Hemorrhage)",
      "input": {
        "gcs_score": {
          "label": "GCS Score",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "13-15"
            },
            {
              "value": 1,
              "label": "5-12"
            },
            {
              "value": 2,
              "label": "3-4"
            }
          ]
        },
        "volume": {
          "label": "ICH Volume",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "<30 mL"
            },
            {
              "value": 1,
              "label": "≥30 mL"
            }
          ]
        },
        "ivh": {
          "label": "Intraventricular Hemorrhage",
          "type": "onoff"
        },
        "infratentorial": {
          "label": "Infratentorial Origin",
          "type": "onoff"
        },
        "age": {
          "label": "Age",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "<80 years"
            },
            {
              "value": 1,
              "label": "≥80 years"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "ICH Score",
          "formula": "gcs_score + volume + ivh + infratentorial + age"
        },
        "mortality_30d": {
          "label": "30-day Mortality",
          "formula": "iif(score==0, '0%', score==1, '13%', score==2, '26%', score==3, '72%', score==4, '97%', '100%')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "Score 0-2: Low mortality, Score 3-4: High mortality, Score 5-6: Very high mortality"
        }
      },
      "test": [
        {
          "input": {
            "gcs_score": 1,
            "volume": 0,
            "ivh": 1,
            "infratentorial": 0,
            "age": 0
          },
          "output": {
            "score": 2,
            "mortality_30d": "26%"
          }
        }
      ],
      "ref": {
        "Hemphill JC 3rd, et al. Stroke. 2001;32(4):891-7.": "pubmed:11283388"
      }
    },
    "moca": {
      "name": "MoCA (Montreal Cognitive Assessment)",
      "input": {
        "score": {
          "label": "MoCA Score",
          "type": "int",
          "min": 0,
          "max": 30
        },
        "education": {
          "label": "Education ≤12 years",
          "type": "onoff"
        }
      },
      "output": {
        "adjusted_score": {
          "label": "Adjusted Score",
          "formula": "min(30, score + education)"
        },
        "interpretation": {
          "label": "Interpretation",
          "formula": "iif(adjusted_score>=26, 'Normal cognition', adjusted_score>=18, 'Mild cognitive impairment', 'Significant cognitive impairment')"
        },
        "note": {
          "label": "Note",
          "text": "Add 1 point if education ≤12 years. Normal: ≥26/30. Cutoff for MCI: 18-25"
        }
      },
      "test": [
        {
          "input": {
            "score": 24,
            "education": 1
          },
          "output": {
            "adjusted_score": 25,
            "interpretation": "Mild cognitive impairment"
          }
        }
      ],
      "ref": {
        "Nasreddine ZS, et al. J Am Geriatr Soc. 2005;53(4):695-9.": "pubmed:15817019",
        "MoCA Official": "https://www.mocatest.org/"
      }
    }
  },
  "Others": {
    "lms_zscore": {
      "name": "LMS Z-Score Calculation",
      "input": {
        "value": {
          "label": "Value",
          "type": "float",
          "min": -99999999,
          "max": 99999999
        },
        "l": {
          "label": "L (Skewness)",
          "type": "float",
          "min": -10,
          "max": 10
        },
        "m": {
          "label": "M (Median)",
          "type": "float",
          "min": -99999999,
          "max": 99999999
        },
        "s": {
          "label": "S (Coefficient of Variation)",
          "type": "float",
          "min": -10,
          "max": 10
        }
      },
      "output": {
        "zscore": {
          "label": "Z-Score",
          "formula": "GetZScoreFromLMS(value, l, m, s)",
          "precision": 2
        },
        "percentile": {
          "label": "Percentile",
          "formula": "CalculatePercentileFromZScore(zscore)",
          "precision": 1
        }
      },
      "test": [
        {
          "input": {
            "value": 50,
            "l": 1,
            "m": 50,
            "s": 0.1
          },
          "output": {
            "zscore": 0
          }
        }
      ],
      "ref": {
        "Percentile Data Files with LMS Values": "http://www.cdc.gov/growthcharts/percentile_data_files.htm",
        "入門統計学": "isbn:9784274068553",
        "在胎期間別出生時体格標準値との比較": "http://app.kcrt.net/bw/"
      }
    }
  },
  "Emergency Medicine": {
    "jcs": {
      "name": "Japan Coma Scale (JCS)",
      "type": "html",
      "html": "<h3>I. Awake</h3><ul><li>0 Fully alert</li><li>I-1 Not fully alert but responsive to call</li><li>I-2 Disoriented</li><li>I-3 Cannot state name or birthday</li></ul><h3>II. Responds to stimuli with transient awakening</h3><ul><li>II-10 Opens eyes to normal call</li><li>II-20 Opens eyes to loud call or shaking</li><li>II-30 Opens eyes only to pain + continuous calling</li></ul><h3>III. Does not respond even to stimuli</h3><ul><li>III-100 Avoids pain stimuli</li><li>III-200 Reacts to pain with movement or grimacing</li><li>III-300 No response to pain</li></ul>",
      "ref": {
        "Japanese emergency medicine standard": ""
      }
    },
    "pediatric_jcs": {
      "name": "Pediatric Consciousness Level",
      "type": "html",
      "html": "<h3>I. Awake</h3><ul><li>0 Fully alert</li><li>I-1 Smiles when soothed (but insufficient response)</li><li>I-2 Does not smile but makes eye contact</li><li>I-3 Does not make eye contact with mother</li></ul><h3>II. Awakens with stimuli (falls asleep when stimuli stop)</h3><ul><li>II-10 Tries to drink when shown beverage or sucks when shown nipple</li><li>II-20 Opens eyes and looks when called</li><li>II-30 Opens eyes only with repeated calling</li></ul><h3>III. Does not awaken even with stimuli</h3><ul><li>III-100 Avoids/brushes away pain stimuli</li><li>III-200 Moves limbs slightly or grimaces to pain</li><li>III-300 No response to pain</li></ul>",
      "ref": {
        "インフルエンザ脳症ガイドライン": "http://idsc.nih.go.jp/disease/influenza/051121Guide.pdf"
      }
    },
    "sofa": {
      "name": "SOFA Score (Sepsis-related Organ Failure Assessment)",
      "input": {
        "pao2": {
          "label": "PaO₂ [mmHg]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "fio2": {
          "label": "FiO₂ (0-1)",
          "type": "float",
          "min": 0.21,
          "max": 1
        },
        "platelets": {
          "label": "Platelets [×10³/μL]",
          "type": "float",
          "min": 0,
          "max": 1000
        },
        "bilirubin": {
          "label": "Bilirubin [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 100
        },
        "map": {
          "label": "Mean Arterial Pressure [mmHg]",
          "type": "float",
          "min": 0,
          "max": 300
        },
        "vasopressor": {
          "label": "Vasopressor Use",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "None"
            },
            {
              "value": 1,
              "label": "Dopamine ≤5 μg/kg/min or dobutamine"
            },
            {
              "value": 2,
              "label": "Dopamine >5 μg/kg/min or epinephrine ≤0.1 μg/kg/min or norepinephrine ≤0.1 μg/kg/min"
            },
            {
              "value": 3,
              "label": "Dopamine >15 μg/kg/min or epinephrine >0.1 μg/kg/min or norepinephrine >0.1 μg/kg/min"
            }
          ]
        },
        "gcs": {
          "label": "Glasgow Coma Scale",
          "type": "float",
          "min": 3,
          "max": 15
        },
        "creatinine": {
          "label": "Creatinine [mg/dL]",
          "type": "float",
          "min": 0,
          "max": 20
        },
        "urine_output": {
          "label": "Urine Output [mL/day]",
          "type": "float",
          "min": 0,
          "max": 10000,
          "default": 0
        }
      },
      "output": {
        "pao2_fio2": {
          "label": "PaO₂/FiO₂ Ratio",
          "formula": "pao2/fio2",
          "precision": 0
        },
        "respiration_score": {
          "label": "Respiration Score",
          "formula": "iif(pao2/fio2 < 100, 4, pao2/fio2 < 200, 3, pao2/fio2 < 300, 2, pao2/fio2 < 400, 1, 0)"
        },
        "coagulation_score": {
          "label": "Coagulation Score",
          "formula": "iif(platelets < 20, 4, platelets < 50, 3, platelets < 100, 2, platelets < 150, 1, 0)"
        },
        "liver_score": {
          "label": "Liver Score",
          "formula": "iif(bilirubin >= 12, 4, bilirubin >= 6, 3, bilirubin >= 2, 2, bilirubin >= 1.2, 1, 0)"
        },
        "cardiovascular_score": {
          "label": "Cardiovascular Score",
          "formula": "iif(vasopressor >= 3, 4, vasopressor == 2, 3, vasopressor == 1, 2, map < 70, 1, 0)"
        },
        "cns_score": {
          "label": "CNS Score",
          "formula": "iif(gcs < 6, 4, gcs < 10, 3, gcs < 13, 2, gcs < 15, 1, 0)"
        },
        "renal_score": {
          "label": "Renal Score",
          "formula": "iif(creatinine >= 5 or urine_output < 200, 4, creatinine >= 3.5 or urine_output < 500, 3, creatinine >= 2, 2, creatinine >= 1.2, 1, 0)"
        },
        "total": {
          "label": "Total SOFA Score",
          "formula": "respiration_score + coagulation_score + liver_score + cardiovascular_score + cns_score + renal_score"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "≥2: Indicates organ dysfunction; Score change ≥2 indicates significant change in organ function"
        }
      },
      "test": [
        {
          "input": {
            "pao2": 80,
            "fio2": 0.5,
            "platelets": 100,
            "bilirubin": 2.5,
            "map": 65,
            "vasopressor": 1,
            "gcs": 14,
            "creatinine": 1.5,
            "urine_output": 500
          },
          "output": {
            "respiration_score": 3,
            "coagulation_score": 1,
            "liver_score": 2,
            "cardiovascular_score": 2,
            "cns_score": 1,
            "renal_score": 1,
            "total": 10
          }
        }
      ],
      "ref": {
        "Vincent JL, et al. Intensive Care Med. 1996;22(7):707-10.": "pubmed:8844239",
        "Seymour CW, et al. JAMA. 2016;315(8):801-10.": "pubmed:26871107",
        "Sepsis-3 Definitions": "doi:10.1001/jama.2016.0287"
      }
    },
    "qsofa": {
      "name": "qSOFA Score (quick SOFA)",
      "input": {
        "respiratory_rate": {
          "label": "Respiratory Rate [/min]",
          "type": "float",
          "min": 0,
          "max": 100
        },
        "altered_mentation": {
          "label": "Altered Mentation (GCS <15)",
          "type": "onoff"
        },
        "systolic_bp": {
          "label": "Systolic Blood Pressure [mmHg]",
          "type": "float",
          "min": 0,
          "max": 300
        }
      },
      "output": {
        "score": {
          "label": "qSOFA Score",
          "formula": "(respiratory_rate >= 22 ? 1 : 0) + altered_mentation + (systolic_bp <= 100 ? 1 : 0)"
        },
        "risk": {
          "label": "Risk Assessment",
          "formula": "iif(score >= 2, 'High risk - consider sepsis', 'Low risk')"
        },
        "interpretation": {
          "label": "Interpretation",
          "text": "Score ≥2: Associated with greater risk of poor outcome (mortality ≥10%); Prompt further evaluation and consider sepsis"
        },
        "note": {
          "label": "Note",
          "text": "qSOFA is a bedside prompt for early identification of patients with suspected infection who are at greater risk for poor outcome outside the ICU"
        }
      },
      "test": [
        {
          "input": {
            "respiratory_rate": 24,
            "altered_mentation": 1,
            "systolic_bp": 95
          },
          "output": {
            "score": 3
          }
        }
      ],
      "ref": {
        "Seymour CW, et al. JAMA. 2016;315(8):801-10.": "pubmed:26871107",
        "Sepsis-3 Definitions": "doi:10.1001/jama.2016.0287"
      }
    },
    "news2": {
      "name": "NEWS 2 (National Early Warning Score 2)",
      "input": {
        "respiratory_rate": {
          "label": "Respiratory Rate [/min]",
          "type": "select",
          "options": [
            {
              "value": 3,
              "label": "≤8"
            },
            {
              "value": 1,
              "label": "9-11"
            },
            {
              "value": 0,
              "label": "12-20"
            },
            {
              "value": 2,
              "label": "21-24"
            },
            {
              "value": 3,
              "label": "≥25"
            }
          ]
        },
        "spo2_scale": {
          "label": "SpO₂ Scale",
          "type": "select",
          "options": [
            {
              "value": 1,
              "label": "Scale 1 (normal target SpO₂ 94-98%)"
            },
            {
              "value": 2,
              "label": "Scale 2 (hypercapnic respiratory failure, target 88-92%)"
            }
          ]
        },
        "spo2": {
          "label": "SpO₂ (%)",
          "type": "select",
          "options": [
            {
              "value": 3,
              "label": "≤83"
            },
            {
              "value": 2,
              "label": "84-85"
            },
            {
              "value": 1,
              "label": "86-87"
            },
            {
              "value": 0,
              "label": "88-92 or ≥93 on air"
            },
            {
              "value": 1,
              "label": "93-94 on oxygen"
            },
            {
              "value": 2,
              "label": "95-96 on oxygen"
            },
            {
              "value": 3,
              "label": "≥97 on oxygen"
            }
          ]
        },
        "air_or_oxygen": {
          "label": "Air or Oxygen",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Air"
            },
            {
              "value": 2,
              "label": "Oxygen"
            }
          ]
        },
        "systolic_bp": {
          "label": "Systolic BP [mmHg]",
          "type": "select",
          "options": [
            {
              "value": 3,
              "label": "≤90"
            },
            {
              "value": 2,
              "label": "91-100"
            },
            {
              "value": 1,
              "label": "101-110"
            },
            {
              "value": 0,
              "label": "111-219"
            },
            {
              "value": 3,
              "label": "≥220"
            }
          ]
        },
        "pulse": {
          "label": "Pulse [bpm]",
          "type": "select",
          "options": [
            {
              "value": 3,
              "label": "≤40"
            },
            {
              "value": 1,
              "label": "41-50"
            },
            {
              "value": 0,
              "label": "51-90"
            },
            {
              "value": 1,
              "label": "91-110"
            },
            {
              "value": 2,
              "label": "111-130"
            },
            {
              "value": 3,
              "label": "≥131"
            }
          ]
        },
        "consciousness": {
          "label": "Consciousness",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Alert"
            },
            {
              "value": 3,
              "label": "CVPU (Confusion/Voice/Pain/Unresponsive)"
            }
          ]
        },
        "temperature": {
          "label": "Temperature [°C]",
          "type": "select",
          "options": [
            {
              "value": 3,
              "label": "≤35.0"
            },
            {
              "value": 1,
              "label": "35.1-36.0"
            },
            {
              "value": 0,
              "label": "36.1-38.0"
            },
            {
              "value": 1,
              "label": "38.1-39.0"
            },
            {
              "value": 2,
              "label": "≥39.1"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "NEWS 2 Score",
          "formula": "respiratory_rate + spo2 + air_or_oxygen + systolic_bp + pulse + consciousness + temperature"
        },
        "risk": {
          "label": "Clinical Risk",
          "formula": "iif(score==0, 'Low', score<=4, 'Low (monitor 4-6h)', score<=6, 'Medium (urgent review)', 'High (emergency)')"
        },
        "recommendation": {
          "label": "Response",
          "formula": "iif(score==0, 'Minimum 12h monitoring', score<=4, 'Monitor 4-6h, consider escalation', score<=6, 'Urgent review by competent clinician', 'Emergency assessment, consider ICU')"
        }
      },
      "test": [
        {
          "input": {
            "respiratory_rate": 2,
            "spo2_scale": 1,
            "spo2": 0,
            "air_or_oxygen": 0,
            "systolic_bp": 0,
            "pulse": 1,
            "consciousness": 0,
            "temperature": 1
          },
          "output": {
            "score": 4
          }
        }
      ],
      "ref": {
        "Royal College of Physicians. NEWS2. 2017.": "https://www.rcplondon.ac.uk/projects/outputs/national-early-warning-score-news-2"
      }
    },
    "sirs": {
      "name": "SIRS Criteria",
      "input": {
        "temperature": {
          "label": "Temperature <36°C or >38°C",
          "type": "onoff"
        },
        "heart_rate": {
          "label": "Heart Rate >90 bpm",
          "type": "onoff"
        },
        "respiratory_rate": {
          "label": "Respiratory Rate >20/min or PaCO₂ <32 mmHg",
          "type": "onoff"
        },
        "wbc": {
          "label": "WBC <4,000 or >12,000 or >10% bands",
          "type": "onoff"
        }
      },
      "output": {
        "score": {
          "label": "SIRS Criteria Met",
          "formula": "temperature + heart_rate + respiratory_rate + wbc"
        },
        "diagnosis": {
          "label": "SIRS",
          "formula": "iif(score>=2, 'SIRS Present (≥2 criteria)', 'SIRS Absent')"
        },
        "note": {
          "label": "Note",
          "text": "SIRS ≥2 criteria + infection = Sepsis. SIRS alone is non-specific."
        }
      },
      "test": [
        {
          "input": {
            "temperature": 1,
            "heart_rate": 1,
            "respiratory_rate": 0,
            "wbc": 0
          },
          "output": {
            "score": 2,
            "diagnosis": "SIRS Present (≥2 criteria)"
          }
        }
      ],
      "ref": {
        "Bone RC, et al. Chest. 1992;101(6):1644-55.": "pubmed:1303622"
      }
    },
    "mews": {
      "name": "Modified Early Warning Score (MEWS)",
      "input": {
        "systolic_bp": {
          "label": "Systolic BP [mmHg]",
          "type": "select",
          "options": [
            {
              "value": 3,
              "label": "≤70"
            },
            {
              "value": 2,
              "label": "71-80"
            },
            {
              "value": 1,
              "label": "81-100"
            },
            {
              "value": 0,
              "label": "101-199"
            },
            {
              "value": 2,
              "label": "≥200"
            }
          ]
        },
        "heart_rate": {
          "label": "Heart Rate [bpm]",
          "type": "select",
          "options": [
            {
              "value": 2,
              "label": "≤40"
            },
            {
              "value": 1,
              "label": "41-50"
            },
            {
              "value": 0,
              "label": "51-100"
            },
            {
              "value": 1,
              "label": "101-110"
            },
            {
              "value": 2,
              "label": "111-129"
            },
            {
              "value": 3,
              "label": "≥130"
            }
          ]
        },
        "respiratory_rate": {
          "label": "Respiratory Rate [/min]",
          "type": "select",
          "options": [
            {
              "value": 2,
              "label": "<9"
            },
            {
              "value": 0,
              "label": "9-14"
            },
            {
              "value": 1,
              "label": "15-20"
            },
            {
              "value": 2,
              "label": "21-29"
            },
            {
              "value": 3,
              "label": "≥30"
            }
          ]
        },
        "temperature": {
          "label": "Temperature [°C]",
          "type": "select",
          "options": [
            {
              "value": 2,
              "label": "<35"
            },
            {
              "value": 0,
              "label": "35-38.4"
            },
            {
              "value": 2,
              "label": "≥38.5"
            }
          ]
        },
        "avpu": {
          "label": "AVPU Score",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "Alert"
            },
            {
              "value": 1,
              "label": "Voice"
            },
            {
              "value": 2,
              "label": "Pain"
            },
            {
              "value": 3,
              "label": "Unresponsive"
            }
          ]
        }
      },
      "output": {
        "score": {
          "label": "MEWS",
          "formula": "systolic_bp + heart_rate + respiratory_rate + temperature + avpu"
        },
        "risk": {
          "label": "Risk Level",
          "formula": "iif(score<=2, 'Low risk', score<=3, 'Moderate risk', 'High risk (≥4)')"
        },
        "action": {
          "label": "Recommended Action",
          "formula": "iif(score<=2, 'Routine monitoring', score<=3, 'Increase monitoring frequency', 'Urgent medical review required')"
        }
      },
      "test": [
        {
          "input": {
            "systolic_bp": 1,
            "heart_rate": 1,
            "respiratory_rate": 1,
            "temperature": 0,
            "avpu": 0
          },
          "output": {
            "score": 3,
            "risk": "Moderate risk"
          }
        }
      ],
      "ref": {
        "Subbe CP, et al. QJM. 2001;94(10):521-6.": "pubmed:11588210"
      }
    },
    "apache2": {
      "name": "APACHE II Score",
      "input": {
        "age": {
          "label": "Age [years]",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "<45"
            },
            {
              "value": 2,
              "label": "45-54"
            },
            {
              "value": 3,
              "label": "55-64"
            },
            {
              "value": 5,
              "label": "65-74"
            },
            {
              "value": 6,
              "label": "≥75"
            }
          ]
        },
        "chronic_health": {
          "label": "Chronic Health",
          "type": "select",
          "options": [
            {
              "value": 0,
              "label": "No chronic disease"
            },
            {
              "value": 2,
              "label": "Elective postop"
            },
            {
              "value": 5,
              "label": "Non-operative or emergency postop"
            }
          ]
        },
        "temperature": {
          "label": "Temperature [°C]",
          "type": "float",
          "min": 25,
          "max": 45
        },
        "map": {
          "label": "Mean Arterial Pressure [mmHg]",
          "type": "float",
          "min": 20,
          "max": 200
        },
        "heart_rate": {
          "label": "Heart Rate [bpm]",
          "type": "int",
          "min": 20,
          "max": 250
        },
        "respiratory_rate": {
          "label": "Respiratory Rate [/min]",
          "type": "int",
          "min": 5,
          "max": 60
        },
        "fio2": {
          "label": "FiO₂",
          "type": "float",
          "min": 0.21,
          "max": 1
        },
        "pao2_or_aado2": {
          "label": "PaO₂ (if FiO₂<0.5) or A-aDO₂ (if FiO₂≥0.5) [mmHg]",
          "type": "float",
          "min": 0,
          "max": 600
        },
        "arterial_ph": {
          "label": "Arterial pH",
          "type": "float",
          "min": 6.5,
          "max": 8
        },
        "sodium": {
          "label": "Serum Sodium [mEq/L]",
          "type": "int",
          "min": 100,
          "max": 200
        },
        "potassium": {
          "label": "Serum Potassium [mEq/L]",
          "type": "float",
          "min": 1,
          "max": 10
        },
        "creatinine": {
          "label": "Serum Creatinine [mg/dL]",
          "type": "float",
          "min": 0.1,
          "max": 20
        },
        "hematocrit": {
          "label": "Hematocrit [%]",
          "type": "float",
          "min": 10,
          "max": 70
        },
        "wbc": {
          "label": "WBC [×10³/μL]",
          "type": "float",
          "min": 0.1,
          "max": 100
        },
        "gcs": {
          "label": "Glasgow Coma Score",
          "type": "int",
          "min": 3,
          "max": 15
        }
      },
      "output": {
        "temp_points": {
          "label": "Temperature points",
          "formula": "iif(temperature>=41, 4, temperature>=39, 3, temperature>=38.5, 1, temperature>=36, 0, temperature>=34, 1, temperature>=32, 2, temperature>=30, 3, 4)"
        },
        "map_points": {
          "label": "MAP points",
          "formula": "iif(map>=160, 4, map>=130, 3, map>=110, 2, map>=70, 0, map>=50, 2, 4)"
        },
        "hr_points": {
          "label": "Heart rate points",
          "formula": "iif(heart_rate>=180, 4, heart_rate>=140, 3, heart_rate>=110, 2, heart_rate>=70, 0, heart_rate>=55, 2, heart_rate>=40, 3, 4)"
        },
        "rr_points": {
          "label": "Respiratory rate points",
          "formula": "iif(respiratory_rate>=50, 4, respiratory_rate>=35, 3, respiratory_rate>=25, 1, respiratory_rate>=12, 0, respiratory_rate>=10, 1, respiratory_rate>=6, 2, 4)"
        },
        "oxygenation_points": {
          "label": "Oxygenation points",
          "formula": "iif(fio2>=0.5, iif(pao2_or_aado2>=500, 4, pao2_or_aado2>=350, 3, pao2_or_aado2>=200, 2, 0), iif(pao2_or_aado2>=70, 0, pao2_or_aado2>=61, 1, pao2_or_aado2>=55, 3, 4))"
        },
        "ph_points": {
          "label": "pH points",
          "formula": "iif(arterial_ph>=7.7, 4, arterial_ph>=7.6, 3, arterial_ph>=7.5, 1, arterial_ph>=7.33, 0, arterial_ph>=7.25, 2, arterial_ph>=7.15, 3, 4)"
        },
        "na_points": {
          "label": "Sodium points",
          "formula": "iif(sodium>=180, 4, sodium>=160, 3, sodium>=155, 2, sodium>=150, 1, sodium>=130, 0, sodium>=120, 2, sodium>=111, 3, 4)"
        },
        "k_points": {
          "label": "Potassium points",
          "formula": "iif(potassium>=7, 4, potassium>=6, 3, potassium>=5.5, 1, potassium>=3.5, 0, potassium>=3, 1, potassium>=2.5, 2, 4)"
        },
        "creat_points": {
          "label": "Creatinine points",
          "formula": "iif(creatinine>=3.5, 4, creatinine>=2.0, 3, creatinine>=1.5, 2, creatinine>=0.6, 0, 2)"
        },
        "hct_points": {
          "label": "Hematocrit points",
          "formula": "iif(hematocrit>=60, 4, hematocrit>=50, 2, hematocrit>=46, 1, hematocrit>=30, 0, hematocrit>=20, 2, 4)"
        },
        "wbc_points": {
          "label": "WBC points",
          "formula": "iif(wbc>=40, 4, wbc>=20, 2, wbc>=15, 1, wbc>=3, 0, wbc>=1, 2, 4)"
        },
        "gcs_points": {
          "label": "GCS points",
          "formula": "15 - gcs"
        },
        "aps": {
          "label": "Acute Physiology Score",
          "formula": "temp_points + map_points + hr_points + rr_points + oxygenation_points + ph_points + na_points + k_points + creat_points + hct_points + wbc_points + gcs_points"
        },
        "apache_ii": {
          "label": "APACHE II Score",
          "formula": "aps + age + chronic_health"
        },
        "mortality": {
          "label": "Estimated Mortality",
          "formula": "iif(apache_ii<10, '<4%', apache_ii<15, '8%', apache_ii<20, '15%', apache_ii<25, '25%', apache_ii<30, '40%', apache_ii<35, '55%', '>75%')"
        }
      },
      "test": [
        {
          "input": {
            "age": 3,
            "chronic_health": 0,
            "temperature": 38,
            "map": 80,
            "heart_rate": 90,
            "respiratory_rate": 18,
            "fio2": 0.21,
            "pao2_or_aado2": 80,
            "arterial_ph": 7.4,
            "sodium": 140,
            "potassium": 4,
            "creatinine": 1,
            "hematocrit": 40,
            "wbc": 10,
            "gcs": 15
          },
          "output": {
            "apache_ii": 7
          }
        }
      ],
      "ref": {
        "Knaus WA, et al. Crit Care Med. 1985;13(10):818-29.": "pubmed:3928249"
      }
    }
  }
}
